(function(i){Array.prototype.remove=function(a,d){var b=this.slice((d||a)+1||this.length);this.length=a<0?this.length+a:a;return this.push.apply(this,b)};var e={config:{console:!1}};(function(a){function d(b){if(a.isArray(b.message)){console.group(b.group);for(var c=0,h=b.message.length;c<h;c++){var g=a.extend(e.console.mGetMessageTemplate(),b.message[c]);d(g)}}else console.group(b.message),console.log(b.data);console.groupEnd()}a.extend(!0,e,{console:{mGetMessageTemplate:function(){return{group:"", message:"",data:""}},mMessage:function(b){e.config.console&&(b=a.extend(e.console.mGetMessageTemplate(),b),d(b))}}})})(jQuery);(function(a){function d(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function b(c,g){if(typeof c==typeof g){if(typeof c=="object"){if(a.isArray(c)){if(c.length==g.length){for(var f=0,d=c.length;f<d;f++)if(!b(c[f],g[f]))return!1;return!0}}else{for(f in c)if(!b(c[f],g[f]))return!1;var e=d=0;for(f in c)d++;for(f in g)e++; return d==e}return!1}return c==g}return!1}var c=typeof localStorage=="undefined"?!1:!0;a.extend(!0,e,{util:{mEmpty:function(c){var b=typeof c;if(b!="undefined"&&c!=null){if(b=="object"){if(a.isArray(c))return c.length==0;return a.isEmptyObject(c)}return a.trim(c)==""}return!0},mEqual:function(c){if(!e.util.mEmpty(c)&&a.isArray(c)){for(var g=!0,f=0,d=c.length;f<d;f++)b(c[0],c[f])||(g=!1,f=d);return g}return!0},mGetUrlParameter:function(c){var b=window.location.search;if(e.util.mEmpty(b))return null; else{for(var f={},b=b.substring(1).split("&"),n=0,l=b.length;n<l;n++){var k=b[n].split("=");f[k[0]]=a.trim(d(decodeURIComponent(k[1])))}return e.util.mEmpty(c)?f:(c=f[c],typeof c=="undefined"?null:c)}},mHasLocalStorage:function(){return c}}})})(jQuery);(function(a){var d={};a.extend(!0,e,{ui:{mElementInfo:function(b){var b=a.extend({selector:"body"},b),c=a(b.selector).eq(0),b=[c.width(),c.height()],c=c.offset(),c=[c.left,c.top];return{offsets:c,dimensions:b}},mWindowInfo:function(){var b={};b.offsets= typeof window.pageYOffset=="number"?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0];b.dimensions=[a(window).width(),a(window).height()];return b},widget:{mGenerateWidgetID:function(){var a=Math.floor(Math.random()* 1E7);return e.util.mEmpty(d[a])?(d[a]=!0,a):e.ui.widget.mGenerateWidgetID()}}}})})(jQuery);(function(a){function d(a,b){var g=b,f;for(f in a)g=g.replace(RegExp("\\$\\["+f+"\\]","g"),escape(a[f]));return unescape(g)}var b={codes:{eEmpty:"$[label] is empty.",eMissingValidator:"Missing Validator"},codeResultsTemplate:{success:[],error:[]},defaultCodeMessage:"$[label] is UNDEFINED",ruleResultsTemplate:{valid:!0,successCodes:[],errorCodes:[]},validators:{missingvalidator:function(){return a.extend(!0, {},e.validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},notempty:function(c){var b=a.extend(!0,{},e.validation.mGetRuleResultsTemplate());if(typeof c!="undefined"&&c!=null)if(typeof c=="string")b.valid=a.trim(c)!="";else if(a.isArray(c))b.valid=c.length!=0;else if(typeof c=="object")b.valid=!a.isEmptyObject(c);b.valid||b.errorCodes.push("eEmpty");return b}},validationResultsTemplate:{data:"",valid:!0,codes:{}}};a.extend(!0,e,{validation:{mAddCodes:function(c){a.extend(b.codes, c)},mAddValidators:function(c){a.extend(b.validators,c)},mGetCodes:function(){return b.codes},mGetCodeMessage:function(a,h){if(b.codes[a]!=void 0)return d({label:h},b.codes[a]);return d({label:a},b.defaultCodeMessage)},mGetRuleResultsTemplate:function(){return a.extend(!0,{},b.ruleResultsTemplate)},mGetValidators:function(){return b.validators},mValidate:function(c){var c=a.extend(!0,{},b.validationResultsTemplate,{data:a.extend(!0,{},c)}),h;for(h in c.data){var g=c.data[h];c.codes[h]=a.extend(!0, {},b.codeResultsTemplate);for(var f=0,d=g.rules.length;f<d;f++){var e=g.rules[f],k=a.extend(!0,{},b.ruleResultsTemplate),k=b.validators[e]?b.validators[e](g.value):b.validators.missingvalidator(g.value),e=h,s=c;s.codes[e].success=s.codes[e].success.concat(k.successCodes);s.codes[e].error=s.codes[e].error.concat(k.errorCodes);if(!k.valid)s.valid=!1}c.codes[h].error.length==0&&c.codes[h].success.length==0&&delete c.codes[h]}return c}}})})(jQuery);var j=window.simplr={config:{mToggleConsole:function(a){i("#_simplr_core_console").remove(); e.config.console=!1;if(a)try{if(typeof window.console!="undefined"&&typeof window.console.group!="undefined")i(function(){i("body").append('<p id="_simplr_core_console" style="margin: 0; text-align: center; position: fixed; top: 0; width: 100%; left: 0; border-bottom: 1px solid #000; color: #fff; font-weight: bold; background-color: #f00; padding: 5px; font-size: 11px; opacity: .75;">[console]: Console Messaging Active</p>');i("#_simplr_core_console").mouseover(function(){i(this).slideUp()}).mouseout(function(){i(this).delay(3E3).slideDown()})}), e.config.console=!0}catch(d){}return e.config.console}}};(function(a){var d={userAgent:""};a.extend(j,{browser:{mAddressBarHeight:function(){var a=b.mDevice();return a=="iPhone"||a=="iPod"||a=="iPad"?60:0},mDevice:function(){if(d.userAgent.match(/iPhone/i))return"iPhone";else if(d.userAgent.match(/iPod/i))return"iPod";else if(d.userAgent.match(/iPad/i))return"iPad";else if(d.userAgent.match(/Android/i))return"Android";return"other"},mLocalStorageCapable:function(){return e.util.mHasLocalStorage()}, mSetUserAgent:function(a){d.userAgent=a},mTouchCapable:function(){var a=b.mDevice();return a=="iPhone"||a=="iPod"||a=="iPad"||a=="Android"}}});var b=j.browser;b.mSetUserAgent(navigator.userAgent)})(jQuery);(function(a){a.extend(j,{cache:{mExpire:function(a){e.util.mHasLocalStorage()&&(localStorage.removeItem(a),localStorage.removeItem(a+"_data"));return null},mGet:function(b){b=a.extend({key:"",identifier:""},b);if(e.util.mHasLocalStorage()&&b.key!=""){var c=localStorage.getItem(b.key);if(c!=null&& (c=c.split("|"),c.length==2&&c[0]==b.identifier))if((new Date).getTime()<=parseInt(c[1],10))return localStorage.getItem(b.key+"_data");else d.mExpire(b.key)}return null},mSet:function(b){b=a.extend({key:"",identifier:"",data:"",freshness:6E5},b);e.util.mHasLocalStorage()&&b.key!=""&&(localStorage.setItem(b.key,b.identifier+"|"+((new Date).getTime()+b.freshness)),localStorage.setItem(b.key+"_data",b.data));return b.data}}});var d=j.cache})(jQuery);(function(a){a.extend(j,{cookie:{mGet:function(b){b= a.extend({name:""},b);if(document.cookie.length>0&&!e.util.mEmpty(b.name)&&(b=document.cookie.match("(^|;) ?"+b.name+"=([^;]*)(;|$)")))return decodeURIComponent(b[2]);return null},mSet:function(b){b=a.extend({name:"",value:"",expireDays:null,path:"/",domain:null,secure:!1},b);if(!e.util.mEmpty(b.name)){var c=b.name+"="+encodeURIComponent(b.value);if(!e.util.mEmpty(b.expireDays)){var h=new Date;h.setTime(h.getTime()+b.expireDays*864E5);c+="; expires="+h.toUTCString()}c+=!e.util.mEmpty(b.path)?"; path="+ b.path:"";c+=!e.util.mEmpty(b.domain)?"; domain="+b.domain:"";c+=b.secure?"; secure":"";document.cookie=c;return!0}return!1},mExpire:function(b){return d.mSet(a.extend({name:"",expireDays:-1},b))}}});var d=j.cookie})(jQuery);(function(a,d,b){function c(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}var h="hashchange",g=document,f,e=a.event.special,l=g.documentMode,k="on"+h in d&&(l===b||l>7);a.fn[h]=function(a){return a?this.bind(h,a):this.trigger(h)};a.fn[h].delay=50;e[h]=a.extend(e[h], {setup:function(){if(k)return!1;a(f.start)},teardown:function(){if(k)return!1;a(f.stop)}});f=function(){function f(){var b=c(),g=p(l);if(b!==l)j(l=b,g),a(d).trigger(h);else if(g!==l)location.href=location.href.replace(/#.*/,"")+g;n=setTimeout(f,a.fn[h].delay)}var e={},n,l=c(),i=function(a){return a},j=i,p=i;e.start=function(){n||f()};e.stop=function(){n&&clearTimeout(n);n=b};a.browser.msie&&!k&&function(){var b,d;e.start=function(){if(!b)d=(d=a.fn[h].src)&&d+c(),b=a('<iframe tabindex="-1" title="empty"/>').hide().one("load", function(){d||j(c());f()}).attr("src",d||"javascript:0").insertAfter("body")[0].contentWindow,g.onpropertychange=function(){try{if(event.propertyName==="title")b.document.title=g.title}catch(a){}}};e.stop=i;p=function(){return c(b.location.href)};j=function(c,f){var d=b.document,e=a.fn[h].domain;if(c!==f)d.title=g.title,d.open(),e&&d.write('<script>document.domain="'+e+'"<\/script>'),d.close(),b.location.hash=c}}();return e}()})(jQuery,this);(function(a){var d={crud:{view:!0,"new":!0,update:!0,"delete":!0}, commands:{},bases:{}};a.extend(j,{controller:{mAddBases:function(c){for(var c=a.isArray(c)?c:[c],b=0,g=c.length;b<g;b++)d.bases[c[b]]=1},mAddCommands:function(c){for(var b in c){var g=a.extend({route:[],callback:function(){}},c[b]),f=g.route.join("_");if(f!="")d.commands[f]=g.callback}},mExecute:function(a){var b=a.route.join("_");try{d.commands[b](a)}catch(g){}},mGetCommands:function(){return d.commands},mGetBases:function(){return d.bases},mRoute:function(b){b={route:[],url:b,base:"",resources:{}, action:"",parameters:{}};if(b.url[0]=="#")b.url=b.url.substring(1);if(b.url[0]=="!")b.url=b.url.substring(1);var h=b.url.split("?"),g=h[0],f;for(f in d.bases)if((h[0]=h[0].replace(f,""))!=g){b.base=f;b.route.push(f);break}h[0]=h[0].split("/");b.action=h[0][h[0].length-1];b.action=d.crud[b.action]?b.action:"view";f=!0;for(var g="",e=0,l=h[0].length-1;e<l;e++)h[0][e]!=""&&(f?(g=h[0][e],b.route.push(g),b.resources[g]=""):b.resources[g]=h[0][e],f=!f);if(h[1]){h=h[1].split("&");f=0;for(g=h.length;f<g;f++)e= h[f].split("="),b.parameters[e[0]]=a.trim(e[1].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"))}b.route.push(b.action);return b},mRouteAndExecute:function(a){b.mExecute(b.mRoute(decodeURI(a)))}}});var b=j.controller;a(function(){a(window).hashchange(function(){window.location.hash!=""&&b.mRouteAndExecute(window.location.hash)})})})(jQuery);var o;o||(o={});(function(){function a(a){return a<10?"0"+a:a}function d(a){h.lastIndex=0;return h.test(a)?'"'+a.replace(h, function(a){var b=e[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(a,c){var h,e,n,i,j=g,p,m=c[a];m&&typeof m==="object"&&typeof m.toJSON==="function"&&(m=m.toJSON(a));typeof l==="function"&&(m=l.call(c,a,m));switch(typeof m){case "string":return d(m);case "number":return isFinite(m)?String(m):"null";case "boolean":case "null":return String(m);case "object":if(!m)return"null";g+=f;p=[];if(Object.prototype.toString.apply(m)==="[object Array]"){i= m.length;for(h=0;h<i;h+=1)p[h]=b(h,m)||"null";n=p.length===0?"[]":g?"[\n"+g+p.join(",\n"+g)+"\n"+j+"]":"["+p.join(",")+"]";g=j;return n}if(l&&typeof l==="object"){i=l.length;for(h=0;h<i;h+=1)typeof l[h]==="string"&&(e=l[h],(n=b(e,m))&&p.push(d(e)+(g?": ":":")+n))}else for(e in m)Object.prototype.hasOwnProperty.call(m,e)&&(n=b(e,m))&&p.push(d(e)+(g?": ":":")+n);n=p.length===0?"{}":g?"{\n"+g+p.join(",\n"+g)+"\n"+j+"}":"{"+p.join(",")+"}";g=j;return n}}if(typeof Date.prototype.toJSON!=="function")Date.prototype.toJSON= function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, g,f,e={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},l;if(typeof o.stringify!=="function")o.stringify=function(a,c,h){var d;f=g="";if(typeof h==="number")for(d=0;d<h;d+=1)f+=" ";else typeof h==="string"&&(f=h);if((l=c)&&typeof c!=="function"&&(typeof c!=="object"||typeof c.length!=="number"))throw Error("JSON.stringify");return b("",{"":a})};if(typeof o.parse!=="function")o.parse=function(a,b){function h(a,c){var g,f,d=a[c];if(d&&typeof d==="object")for(g in d)Object.prototype.hasOwnProperty.call(d, g)&&(f=h(d,g),f!==void 0?d[g]=f:delete d[g]);return b.call(a,c,d)}var g,a=String(a);c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return g=eval("("+a+")"),typeof b==="function"?h({"":g},""):g;throw new SyntaxError("JSON.parse");}})();(function(a){a.extend(j, {conversion:{mObjectToJSONString:function(a,b,c){return o.stringify(a,b,c)},mJSONStringToObject:function(a,b){return o.parse(a,b)}}})})(jQuery);(function(a){function d(c,h){var g=[b.classes.textError,b.classes.textInformation,b.classes.formError,b.classes.fieldError,b.classes.formEntry],f=["."+g[0],"."+g[1],"."+g[2],"."+g[3],"."+g[4]];a(f[2]+","+f[3],c).filter("._simplr").removeClass(g[2]).removeClass(g[3]);a(f[1]+","+f[0],c).filter("._simplr").remove();for(var d in h.codes){var i=h.codes[d],k=""; a.each([i.error,i.success],function(a,b){for(var c=0,f=b.length;c<f;c++)k+='<p class="'+g[a]+' _simplr">'+e.validation.mGetCodeMessage(b[c],h.data[d].label)+"</p>",c=f;return!1});a("[name='"+d+"']:first",c).addClass(g[3]+" _simplr").closest(f[4]).addClass(g[2]+" _simplr").append(k)}}var b={classes:{formEntry:"formEntry",formError:"formError",fieldError:"errorField",textError:"errorText",textInformation:"informationText"},defaultRules:["notempty"],defaultLabel:"_LABEL_",rules:{},labels:{}};a.extend(!0, j,{form:{mAddValidators:function(a){e.validation.mAddValidators(a)},mGetValidators:function(){return e.validation.mGetValidators()},mAddCodes:function(a){e.validation.mAddCodes(a)},mGetCodes:function(){return e.validation.mGetCodes()},mAddLabelAssociation:function(c){a.extend(b.labels,c)},mAddValidationAssociation:function(c){a.extend(b.rules,c)},mGetValues:function(b){var h={};a("input[type='checkbox']",b).each(function(){h[a(this).attr("name")]=a(this).is(":checked")?a(this).val()!="on"?a(this).val(): !0:!1});a("input[type='text'], input[type='password'], input[type='hidden'], input[type='radio']:checked, select, textarea",b).each(function(){h[a(this).attr("name")]=a(this).val()});return h},mValidateValuesAndRender:function(a,h){var g={},f;for(f in h){for(var i={value:h[f],label:b.labels[f]?b.labels[f]:b.defaultLabel,rules:[]},l=0,k=b.defaultRules.length;l<k;l++)i.rules.push(b.defaultRules[l]);try{b.rules[f](i.rules)}catch(j){}g[f]=i}g=e.validation.mValidate(g);d(a,g);return g.valid}}})})(jQuery); e.validation.mAddCodes({eMissingValidator:"Missing Validator",eAlphaNumeric:"$[label] is not alphanumeric.",eAmericanExpress:"$[label] is not a valid AMERICAN EXPRESS number.",eDinersClub:"$[label] is not a valid DINERS CLUB number.",eDiscover:"$[label] is not a valid DISCOVER number.",eEmail:"$[label] is not an email address.",eEqual:"$[label] does not match.",eMastercard:"$[label] is not a valid MASTERCARD number.",eEmpty:"$[label] is empty.",eNumber:"$[label] is not a number.",ePhoneNumber:"$[label] is not a valid Phone Number.", ePostalCode:"$[label] is not a Postal Code.",eVisa:"$[label] is not a valid VISA number."});e.validation.mAddValidators({missingvalidator:function(){return i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},alphanumeric:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^\w*$/.test(a)});a.valid||a.errorCodes.push("eAlphaNumeric");return a},americanexpress:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^3(4|7)\d{2}-?\d{6}-?\d{5}$/.test(a)}); a.valid||a.errorCodes.push("eAmericanExpress");return a},dinersclub:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^3[0,6,8]\d{12}$/.test(a)});a.valid||a.errorCodes.push("eDinersClub");return a},discover:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^6011-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eDiscover");return a},email:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(a)}); a.valid||a.errorCodes.push("eEmail");return a},equal:function(a){var d=i.extend(!0,{},e.validation.mGetRuleResultsTemplate());if(i.isArray(a))for(var b=0,c=a.length;b<c;b++)if(!e.util.mEqual([a[0],a[b]]))d.valid=!1,b=c;d.valid||d.errorCodes.push("eEqual");return d},mastercard:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eMastercard");return a},notempty:function(a){var d=i.extend(!0,{},e.validation.mGetRuleResultsTemplate()); if(typeof a!="undefined"&&a!=null)if(typeof a=="string")d.valid=i.trim(a)!="";else if(i.isArray(a))d.valid=a.length!=0;else if(typeof a=="object")d.valid=!i.isEmptyObject(a);d.valid||d.errorCodes.push("eEmpty");return d},number:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:!isNaN(parseFloat(a))&&isFinite(a)});a.valid||a.errorCodes.push("eNumber");return a},phonenumber:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^\d{10}$/.test(a)});a.valid|| a.errorCodes.push("ePhoneNumber");return a},postalcode:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^\d{5}([\-]?\d{4})?$/.test(a)});a.valid||a.errorCodes.push("ePostalCode");return a},visa:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eVisa");return a}});var r=function(a,d){typeof a=="string"&&(a=document.getElementById(a));if(a.nodeType!=1)return!1;var b=a.childNodes, c="";if(!d)for(var h=0;h<b.length;h++)if(b[h].nodeType==3){var g=b[h].nodeValue,g=g.replace(/</g,"&lt;"),g=g.replace(/>/g,"&gt;");c+=g}else if(b[h].nodeType==8)c+="<\!--"+b[h].nodeValue+"--\>";else{c+="<"+b[h].nodeName.toLowerCase();for(var g=b[h].attributes,f=0;f<g.length;f++){var e=g[f].nodeName.toLowerCase(),i=g[f].nodeValue;e=="style"&&b[h].style.cssText?c+=' style="'+b[h].style.cssText.toLowerCase()+'"':i&&e!="contenteditable"&&(c+=" "+e+'="'+i+'"')}c+=">"+r(b[h]);c+="</"+b[h].nodeName.toLowerCase()+ ">"}return c};(function(a){function d(c){for(;a(".layout-component",c).size()>0;)d(a(".layout-component:eq(0)",c));var g=a(c).attr("id").split("-")[1];b.components[g]=a.trim(r(a(c).get(0)).replace(/\n/g,"").replace(/\s{1,}/g," "));a(c).remove()}var b={components:{},globalTokens:{}};a.extend(j,{layout:{mAssembleLayout:function(b){var g="";if(b&&b.component&&b.tokens)for(var f=a.isArray(b.tokens)?b.tokens:[b.tokens],d=0,e=f.length;d<e;d++){var i={},j;for(j in f[d]){var o=i,r=j,q;q=f[d][j];q=typeof q== "object"?c.mAssembleLayout(q):q;o[r]=q}g+=c.mReplaceTokens(i,c.mGetComponent(b.component))}return g},mGetComponent:function(c){typeof b.components[c]=="undefined"&&(a("#layout-"+c).size()>0?d(a("#layout-"+c)):b.components[c]=null);return b.components[c]},mGetComponents:function(){return b.components},mLoadComponents:function(){for(;a(".layout-component").size()>0;)d(a(".layout-component:eq(0)"))},mAddGlobalTokens:function(c){a.extend(b.globalTokens,c)},mReplaceTokens:function(c,g){if(g!=null){a.extend(c, b.globalTokens);for(var d in c)g=g.replace(RegExp("\\$\\["+d+"\\]","g"),escape(c[d]))}return unescape(g)}}});var c=j.layout})(jQuery);(function(a){function d(c){var d={services:[],data:{envID:b.env}};a.extend(!0,d,c.options);if(e.util.mEmpty(d.services)){var g=[],f;for(f in b.services)g.push(f);d.services=g}g=a.extend(e.console.mGetMessageTemplate(),{group:"simplr.trigger: "+b.env+" environment",message:[]});f=0;for(var i=d.services.length;f<i;f++){var l=d.services[f];a.isFunction(b.services[l][c.type])&& b.services[l].data.environmentIDs[b.env]&&g.message.push({message:"["+l+"] "+c.type+" triggered.",data:b.services[l][c.type](d.data)})}g.message.length>0&&e.console.mMessage(g)}var b={env:"_simplr",services:{}};a.extend(j,{trigger:{mAddServices:function(c){for(var e in c)b.services[e]=a.extend({data:{environmentIDs:{}},onLoad:function(){},onPage:function(){},onEvent:function(){},onTransaction:function(){}},c[e]),d({type:"onLoad",options:{services:[e]}})},mGetServices:function(){return b.services}, mSetEnvironment:function(a){b.env=a},mOnPage:function(b){d({type:"onPage",options:a.extend({},b)})},mOnEvent:function(b){d({type:"onEvent",options:a.extend({},b)})},mOnTransaction:function(b){d({type:"onTransaction",options:a.extend({},b)})}}})})(jQuery);(function(a){function d(d){var f=a("#"+d.id);f.size()==0?a("body").append('<div id="'+d.id+'" style="position: absolute;"></div>'):(f.removeClass(b).removeClass(c),a(d.closeSelector).unbind("click.simplr.layer.destroy."+d.id));var f=a("#"+d.id),e= !(d.xPos!=null&&d.yPos!=null);e?(d.keepCentered&&f.addClass(c),h.mCenter(d.id)):f.css("left",d.xPos+"px").css("top",d.yPos+"px");f.html(d.defaultContent);e&&h.mCenter(d.id);a(d.closeSelector).bind("click.simplr.layer.destroy."+d.id,function(a){a.preventDefault();h.mDestroy({id:d.id,closeSelector:d.closeSelector})})}var b="_simplr_centerLayer",c="_simplr_keepCenterLayer";a.extend(!0,j,{ui:{layer:{mCenter:function(d){if(!e.util.mEmpty(d)){var d=a("#"+d),f=d.width(),h=d.height(),i=e.ui.mWindowInfo(), k=0,k=(i.dimensions[0]-f)/2,k=k<0?20:k;k+=i.offsets[0];var j=0,j=(i.dimensions[1]-h)/2,j=j<0?20:j;j+=i.offsets[1];(f>i.dimensions[0]||h>i.dimensions[1])&&d.hasClass(c)&&d.removeClass(c).addClass(b);d.css("top",j+"px").css("left",k+"px")}},mCreate:function(b){var c=a.extend({ajax:null,callback:null,closeSelector:"#_simplr_layerClose",defaultContent:"",id:"_simplr_layer",isOverlay:!1,keepCentered:!1,xPos:null,yPos:null},b);if(c.isOverlay)c.id=c.id=="_simplr_layer"?"_simplr_overlay":c.id,c.closeSelector= c.closeSelector=="#_simplr_layerClose"?"#_simplr_overlayClose":c.closeSelector,c.xPos=0,c.yPos=0;d(c);if(c.ajax!=null){var e=c.ajax.success;c.ajax.success=function(b,g){c.defaultContent=b;d(c);a.isFunction(e)&&e(b,g)};a.ajax(c.ajax)}else a.isFunction(c.callback)&&c.callback();c.isOverlay&&a("#"+c.id).css({position:"fixed",width:"100%",height:"100%"})},mDestroy:function(b){b=a.extend({id:"_simplr_layer",closeSelector:"#_simplr_layerClose"},b);e.util.mEmpty(b.id)||(a("#"+b.id).remove(),a(b.closeSelector).unbind("click.simplr.ui.layer.destroy."+ b.id))}}}});var h=j.ui.layer;a(function(){a(window).bind("resize.simplr.ui.layer",function(){a("."+c+",."+b).each(function(d,e){a(e).addClass(c).removeClass(b);h.mCenter(a(e).attr("id"))})}).bind("scroll.simplr.ui.layer",function(){a("."+c).each(function(b,c){h.mCenter(a(c).attr("id"))})})})})(jQuery);i.extend(!0,j,{ui:{newBrowserWindow:function(a){a=i.extend({url:"",width:500,height:500,name:"_simplr_newBrowserWindow"},a);if(!e.util.mEmpty(a.url)){var d="width="+a.width+",height="+a.height,b=a.url, c=a.name;delete a.url;delete a.width;delete a.height;delete a.name;for(var h in a)d+=","+h+"="+a[h];h=window.open(b,c,d);h!=null&&h.focus()}}}});(function(a){function d(b){this.data=a.extend({animateSpeed:200,containerSelector:"#_simplr_widget_trackableScrollingElement_container",elementSelector:"#_simplr_widget_trackableScrollingElement_element",offset:10,refreshSpeed:500,tolerance:10},b);this.data._PRIVATE={evtString:"scroll.simplr.widget.trackableScrollingElement."+e.ui.widget.mGenerateWidgetID(), timeout:null,previousOffset:0};this.destroy();var c=this;a(window).bind(c.data._PRIVATE.evtString,function(){clearTimeout(c.data._PRIVATE.timeout);c.data._PRIVATE.timeout=setTimeout(function(){var b=a(c.data.containerSelector).eq(0),d=b.children(c.data.elementSelector).eq(0);if(b.is(":visible")&&d.is(":visible")){var b=e.ui.mElementInfo({selector:b}),f=e.ui.mElementInfo({selector:d}),i=e.ui.mWindowInfo(),j=i.offsets[1]-c.data._PRIVATE.previousOffset<0;c.data._PRIVATE.previousOffset=i.offsets[1];var k= null,o=[f.offsets[1]-c.data.tolerance,f.offsets[1]+c.data.tolerance],r=[f.offsets[1]+f.dimensions[1]-c.data.tolerance,f.offsets[1]+f.dimensions[1]+c.data.tolerance];i.dimensions[1]>f.dimensions[1]&&(i.offsets[1]<o[0]||i.offsets[1]>o[1])?k=i.offsets[1]-b.offsets[1]+c.data.offset:j&&i.offsets[1]<o[0]?k=i.offsets[1]-b.offsets[1]+c.data.offset:i.offsets[1]+f.dimensions[1]>r[1]&&(k=i.offsets[1]-b.offsets[1]-(f.dimensions[1]-i.dimensions[1])-c.data.offset);k!=null&&(k<0?k=0:k>b.dimensions[1]-f.dimensions[1]&& (k=b.dimensions[1]-f.dimensions[1]),d.stop().animate({marginTop:k},c.data.animateSpeed))}else d.css("margin-top",0)},c.data.refreshSpeed)})}a.extend(!0,j,{ui:{widget:{oTrackableScrollingElement:function(a){return new d(a)}}}});d.prototype.reset=function(){a(this.data.elementSelector).eq(0).css("margin-top",0)};d.prototype.destroy=function(){this.reset();a(window).unbind(this.data._PRIVATE.evtString)}})(jQuery);i.extend(!0,j,{util:{mEmpty:function(a){return e.util.mEmpty(a)},mEqual:function(a){return e.util.mEqual(a)}, mGetUrlParameter:function(a){return e.util.mGetUrlParameter(a)},mHasLocalStorage:function(){return e.util.mHasLocalStorage()},mTruncateString:function(a){a=i.extend({string:"",size:5,postfix:"",smart:!0},a);if(a.string.length>a.size){var d=a.size-a.postfix.length-1,b=d+1;if(a.smart)for(;a.string.charAt(d)!=" "&&d>0;)d--;return a.string.substring(0,d==0?b:d+1)+a.postfix}return a.string}}});(function(a){a.extend(!0,j,{validation:{mAddCodes:function(a){e.validation.mAddCodes(a)},mGetCodes:function(){return e.validation.mGetCodes()}, mAddValidators:function(a){e.validation.mAddValidators(a)},mGetValidators:function(){return e.validation.mGetValidators()},mGetRuleResultsTemplate:function(){return e.validation.mGetRuleResultsTemplate()},mGetCodeMessage:function(a,b){return e.validation.mGetCodeMessage(a,b)},mValidate:function(a){return e.validation.mValidate(a)}}})})(jQuery);e.validation.mAddCodes({eMissingValidator:"Missing Validator",eAlphaNumeric:"$[label] is not alphanumeric.",eAmericanExpress:"$[label] is not a valid AMERICAN EXPRESS number.", eDinersClub:"$[label] is not a valid DINERS CLUB number.",eDiscover:"$[label] is not a valid DISCOVER number.",eEmail:"$[label] is not an email address.",eEqual:"$[label] does not match.",eMastercard:"$[label] is not a valid MASTERCARD number.",eEmpty:"$[label] is empty.",eNumber:"$[label] is not a number.",ePhoneNumber:"$[label] is not a valid Phone Number.",ePostalCode:"$[label] is not a Postal Code.",eVisa:"$[label] is not a valid VISA number."});e.validation.mAddValidators({missingvalidator:function(){return i.extend(!0, {},e.validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},alphanumeric:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^\w*$/.test(a)});a.valid||a.errorCodes.push("eAlphaNumeric");return a},americanexpress:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^3(4|7)\d{2}-?\d{6}-?\d{5}$/.test(a)});a.valid||a.errorCodes.push("eAmericanExpress");return a},dinersclub:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(), {valid:/^3[0,6,8]\d{12}$/.test(a)});a.valid||a.errorCodes.push("eDinersClub");return a},discover:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^6011-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eDiscover");return a},email:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(a)});a.valid||a.errorCodes.push("eEmail");return a},equal:function(a){var d=i.extend(!0,{},e.validation.mGetRuleResultsTemplate()); if(i.isArray(a))for(var b=0,c=a.length;b<c;b++)if(!e.util.mEqual([a[0],a[b]]))d.valid=!1,b=c;d.valid||d.errorCodes.push("eEqual");return d},mastercard:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eMastercard");return a},notempty:function(a){var d=i.extend(!0,{},e.validation.mGetRuleResultsTemplate());if(typeof a!="undefined"&&a!=null)if(typeof a=="string")d.valid=i.trim(a)!="";else if(i.isArray(a))d.valid= a.length!=0;else if(typeof a=="object")d.valid=!i.isEmptyObject(a);d.valid||d.errorCodes.push("eEmpty");return d},number:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:!isNaN(parseFloat(a))&&isFinite(a)});a.valid||a.errorCodes.push("eNumber");return a},phonenumber:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^\d{10}$/.test(a)});a.valid||a.errorCodes.push("ePhoneNumber");return a},postalcode:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(), {valid:/^\d{5}([\-]?\d{4})?$/.test(a)});a.valid||a.errorCodes.push("ePostalCode");return a},visa:function(a){a=i.extend(!0,{},e.validation.mGetRuleResultsTemplate(),{valid:/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eVisa");return a}});(function(a){var d={};a.extend(!0,j,{view:{mAddViews:function(b){for(var c in b){var e=a.extend(!0,{},{html:function(){return""},callback:function(){}},b[c]);d[c]=e}},mGetViews:function(){return d},mRender:function(b){b=a.extend({name:"",data:"", selector:""},b);a(b.selector).html(d[b.name].html(b.data));d[b.name].callback(b.selector,b.data)}}})})(jQuery)})(jQuery);