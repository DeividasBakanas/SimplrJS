// Simplr 3.0.0
!function(){function e(e,t,r){$(function(){var n="#SimplrNotify_"+t;if(e){if(0==$("#SimplrNotify").size()){var a='<div id="SimplrNotify" style="position: fixed; z-index: 100000; top: 0; left: 0; width: 100%; box-shadow: 0 0 5px #000; text-transform: none; font-family: Arial; text-align: center; font-size: 16px; font-weight: normal; color: #000; background: #ccc none; line-height: 1.25; padding: 0; margin: 0; border: 0;"><!-- --></div>';$("body").prepend(a)}if(0==$(n).size()){var i='<p id="'+n.replace("#","")+'" style="margin: 10px 0; padding: 0;">'+r+"</p>";$("div#SimplrNotify").append(i)}}else $(n).remove(),$("#SimplrNotify").is(":empty")&&$("#SimplrNotify").remove()})}window.Simplr={},function(){function e(e){return e}function t(e){return e+"_data"}function r(e,t){return e+"|"+((new Date).getTime()+t)}Simplr.Cache={mExpire:function(r){return localStorage.removeItem(e(r)),localStorage.removeItem(t(r)),localStorage.getItem(t(r))},mGet:function(r){var r=$.extend({key:"",identifier:""},r);if(""!=r.key){var n=localStorage.getItem(e(r.key));if(null!=n){var a=n.split("|");if(2==a.length&&a[0]==r.identifier)return(new Date).getTime()>parseInt(a[1],10)?Simplr.Cache.mExpire(r.key):localStorage.getItem(t(r.key))}}return null},mSet:function(n){var n=$.extend({key:"",identifier:"",data:"",freshness:6e5},n);return""!=n.key?(localStorage.setItem(e(n.key),r(n.identifier,n.freshness)),localStorage.setItem(t(n.key),n.data),Simplr.Cache.mGet({key:n.key,identifier:n.identifier})):null}}}(),function(){var e={CRUD:{view:!0,"new":!0,update:!0,"delete":!0},Commands:{},Bases:{}};Simplr.Controller={mAddBases:function(t){for(var r=$.isArray(t)?t:[t],n=0,a=r.length;a>n;n++)e.Bases[r[n]]=1},mAddCommands:function(t){for(var r in t){var n=$.extend({route:[],callback:function(){}},t[r]),a=n.route.join("_");""!=a&&(e.Commands[a]=n.callback)}},mData:function(){return e},mExecute:function(t){var r=t.route.join("_");$.isFunction(e.Commands[r])&&e.Commands[r](t)},mRoute:function(t){var r={route:[],url:t,base:"",resources:{},action:"",parameters:{}};"#"==r.url.charAt(0)&&(r.url=r.url.substring(1)),"!"==r.url.charAt(0)&&(r.url=r.url.substring(1));var n=r.url.split("?");n[0]=decodeURI(n[0]);var a=n[0];for(var i in e.Bases)if((n[0]=n[0].replace(i,""))!=a){r.base=i,r.route.push(i);break}n[0]=n[0].split("/"),r.action=n[0][n[0].length-1],r.action=e.CRUD[r.action]?r.action:"view";for(var o=!0,l="",s=0,u=n[0].length-1;u>s;s++)""!=n[0][s]&&(o?(l=n[0][s],r.route.push(l),r.resources[l]=""):r.resources[l]=n[0][s],o=!o);if(n[1])for(var d=n[1].split("&"),m=0,c=d.length;c>m;m++){var p=d[m].split("=");r.parameters[p[0]]=$.trim(decodeURIComponent(p[1]).replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"))}return r.route.push(r.action),r},mRouteAndExecute:function(e){Simplr.Controller.mExecute(Simplr.Controller.mRoute(e))}},$(window).on("hashchange",{},function(){Simplr.Controller.mRouteAndExecute(window.location.hash)})}(),Simplr.Cookie={mExpire:function(e){return Simplr.Cookie.mSet($.extend({name:"",expireDays:-1},e))},mGet:function(e){var t=$.extend({name:""},e);if(document.cookie.length>0&&!Simplr.Util.mEmpty(t.name)){var r=document.cookie.match("(^|;) ?"+t.name+"=([^;]*)(;|$)");if(r)return decodeURIComponent(r[2])}return null},mSet:function(e){var t=$.extend({name:"",value:"",expireDays:null,path:"/",domain:null,secure:!1},e);if(""!=t.name){var r=t.name+"="+encodeURIComponent(t.value);if(!Simplr.Util.mEmpty(t.expireDays)){var n=new Date;n.setTime(n.getTime()+864e5*t.expireDays),r+="; expires="+n.toUTCString()}return r+=Simplr.Util.mEmpty(t.path)?"":"; path="+t.path,r+=Simplr.Util.mEmpty(t.domain)?"":"; domain="+t.domain,r+=t.secure?"; secure":"",document.cookie=r,Simplr.Cookie.mGet({name:t.name})}return null}},function(){var t=!1;Simplr.Console={mToggle:function(r){t=void 0!==window.console&&void 0!==window.console.group&&r,e(t,"Console","!-- Console Messaging is Active --!")},mMessage:function(e){if(t){var r=$.extend({group:"",message:"",data:""},e);if($.isArray(r.message)){console.group(r.group);for(var n=0,a=r.message.length;a>n;n++)Simplr.Console.mMessage(r.message[n]);console.groupEnd()}else console.group(r.message),console.log(r.data),console.groupEnd()}}}}(),function(){function e(e,t){var n="_simplr",a=r.Classes;$("."+a.FormError+","+"."+a.FieldError,e).filter("."+n).removeClass(a.FormError).removeClass(a.FieldError),$("."+a.TextInformation+","+"."+a.TextError,e).filter("."+n).remove();for(var i in t.codes){for(var o=t.codes[i],l=[o.error,o.success],s="",u=0;2>u;u++)l[u].length>0&&(s+='<p class="'+(0==u?a.TextError:a.TextInformation)+" "+n+'">'+Simplr.Validation.mGetCodeMessage(l[u][0],t.data[i].label)+"</p>");$("[name='"+i+"']:first",e).addClass(a.FieldError+" "+n).closest("."+a.FormEntry).addClass(a.FormError+" "+n).append(s)}}function t(e){var t={};for(var n in e){for(var a=r.Labels[n]?r.Labels[n]:r.DefaultLabel,i={value:e[n],label:a,rules:[]},o=0,l=r.DefaultRules.length;l>o;o++)i.rules.push(r.DefaultRules[o]);$.isFunction(r.Rules[n])&&r.Rules[n](i.rules),t[n]=i}return t}var r={Classes:{FormEntry:"formEntry",FormError:"formError",FieldError:"errorField",TextError:"errorText",TextInformation:"informationText"},DefaultRules:["notempty"],DefaultLabel:"_LABEL_",Rules:{},Labels:{}};Simplr.Form={mAddLabelAssociation:function(e){$.extend(r.Labels,e)},mAddValidationAssociation:function(e){$.extend(r.Rules,e)},mGetValues:function(e){var t={};return $("input, select, textarea",e).each(function(){var e=$(this);e.is("[type='button']")||e.is("[type='reset']")||e.is("[type='submit']")||e.is("[type='radio']")&&!e.is(":checked")||(t[$(this).attr("name")]=e.is("[type='checkbox']")?$(this).is(":checked")?"on"!=$(this).val()?$(this).val():!0:!1:$(this).val())}),t},mValidateValuesAndRender:function(r,n){var a=t(n),i=Simplr.Validation.mValidate(a);return e(r,i),i.valid}}}();var t=function(e,r){if("string"==typeof e&&(e=document.getElementById(e)),1!=e.nodeType)return!1;var n=e.childNodes,a="";if(!r)for(var i=0;i<n.length;i++)if(3==n[i].nodeType){var o=n[i].nodeValue;o=o.replace(/</g,"&lt;"),o=o.replace(/>/g,"&gt;"),a+=o}else if(8==n[i].nodeType)a+="<!--"+n[i].nodeValue+"-->";else{a+="<"+n[i].nodeName.toLowerCase();for(var l=n[i].attributes,s=0;s<l.length;s++){var u=l[s].nodeName.toLowerCase(),d=l[s].nodeValue;"style"==u&&n[i].style.cssText?a+=' style="'+n[i].style.cssText.toLowerCase()+'"':d&&"contenteditable"!=u&&(a+=" "+u+'="'+d+'"')}a+=">"+t(n[i]),a+="</"+n[i].nodeName.toLowerCase()+">"}return a};!function(){function e(e){return"object"==typeof e?Simplr.Layout.mAssembleLayout(e):e}function r(e){for(;$(".layout-component",e).size()>0;)r($(".layout-component:eq(0)",e));var n={};n[e.attr("id").split("-")[1]]=t(e.get(0)),Simplr.Layout.mAddComponents(n),e.remove()}function n(e){if(void 0===a.Components[e]){var t=$("#layout-"+e);t.size()>0?r($("#layout-"+e)):a.Components[e]=null}return a.Components[e]}var a={Components:{},GlobalTokens:{}};Simplr.Layout={mAddComponents:function(e){for(var t in e)a.Components[t]=$.trim(e[t].replace(/\n/g,"").replace(/\s{1,}/g," "))},mAddGlobalTokens:function(e){$.extend(a.GlobalTokens,e)},mAssembleLayout:function(t){var r="";if(t&&t.component&&t.tokens)for(var n=$.isArray(t.tokens)?t.tokens:[t.tokens],a=0,i=n.length;i>a;a++){var o={};for(var l in n[a])o[l]=e(n[a][l]);r+=Simplr.Layout.mReplaceTokens(o,Simplr.Layout.mGetComponent(t.component))}return r},mData:function(){return a},mGetComponent:function(e){return n(e)},mReplaceTokens:function(e,t){if(null!=t){$.extend(e,a.GlobalTokens);for(var r in e)t=t.replace(RegExp("\\$\\["+r+"\\]","g"),escape(e[r]))}return unescape(t)}}}(),function(){function e(){var e=[];for(var t in r.Services)e.push(t);return e}function t(t){var n={services:[],data:{envID:r.Env}};$.extend(!0,n,t.options),Simplr.Util.mEmpty(n.services)&&(n.services=e());for(var a={group:"simplr.trigger: "+r.Env+" environment",message:[]},i=0,o=n.services.length;o>i;i++){var l=n.services[i];$.isFunction(r.Services[l][t.type])&&r.Services[l].data.environmentIDs[r.Env]&&a.message.push({message:"["+l+"] "+t.type+" triggered.",data:r.Services[l][t.type](n.data)})}a.message.length>0&&Simplr.Console.mMessage(a)}var r={Env:"_simplr",Services:{}};Simplr.Trigger={mAddServices:function(e){for(var t in e)r.Services[t]=$.extend({data:{environmentIDs:{}},onLoad:function(){},onPage:function(){},onEvent:function(){},onTransaction:function(){}},e[t])},mData:function(){return r},mSetEnvironment:function(e){r.Env=e},mOnLoad:function(e){t({type:"onLoad",options:$.extend({},e)})},mOnPage:function(e){t({type:"onPage",options:$.extend({},e)})},mOnEvent:function(e){t({type:"onEvent",options:$.extend({},e)})},mOnTransaction:function(e){t({type:"onTransaction",options:$.extend({},e)})}}}(),function(){function e(t,r){if(typeof t==typeof r){if("object"!=typeof t)return t==r;if(!$.isArray(t)){for(var n in t)if(!e(t[n],r[n]))return!1;var a=0,i=0;for(var n in t)a++;for(var n in r)i++;return a==i}if(t.length==r.length){for(var o=0,l=t.length;l>o;o++)if(!e(t[o],r[o]))return!1;return!0}}return!1}Simplr.Util={mEmpty:function(e){var t=typeof e;return"undefined"!=t&&null!=e?"object"==t?$.isArray(e)?0==e.length:$.isEmptyObject(e):""==$.trim(e):!0},mEqual:function(t){if($.isArray(t)){for(var r=!0,n=0,a=t.length;a>n;n++)e(t[0],t[n])||(r=!1,n=a);return r}return!0},mGetUrlParameter:function(e){var t=location.search;if(""!=t){t=t.substring(1).split("&");for(var r={},n=0,a=t.length;a>n;n++){var i=t[n].split("=");r[i[0]]=$.trim(decodeURIComponent(i[1]).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"))}if(Simplr.Util.mEmpty(e))return r;if(void 0!==r[e])return r[e]}return null},mTruncateString:function(e){var t=$.extend({string:"",size:5,postfix:"",smart:!0},e);if(t.string.length>t.size){var r=t.size-t.postfix.length-1,n=r+1;if(t.smart)for(;" "!=t.string.charAt(r)&&r>0;)r--;return t.string.substring(0,0==r?n:r+1)+t.postfix}return t.string}}}(),function(){function e(e,t,r,n){n.codes[e].success=n.codes[e].success.concat(r.successCodes),n.codes[e].error=n.codes[e].error.concat(r.errorCodes),r.valid||(n.valid=!1)}function t(e,t){var r=t;for(var n in e)r=r.replace(RegExp("\\$\\["+n+"\\]","g"),escape(e[n]));return unescape(r)}var r={codes:{eEmpty:"$[label] is empty.",eMissingValidator:"Missing Validator"},codeResultsTemplate:{success:[],error:[]},defaultCodeMessage:"$[label] is UNDEFINED",ruleResultsTemplate:{valid:!0,successCodes:[],errorCodes:[]},validators:{missingvalidator:function(){return $.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},notempty:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate());return void 0!==e&&null!=e&&("string"==typeof e?t.valid=!(""==$.trim(e)):$.isArray(e)?t.valid=!(0==e.length):"object"==typeof e&&(t.valid=!$.isEmptyObject(e))),t.valid||t.errorCodes.push("eEmpty"),t}},validationResultsTemplate:{data:"",valid:!0,codes:{}}};Simplr.Validation={mAddCodes:function(e){$.extend(r.codes,e)},mGetCodes:function(){return r.codes},mAddValidators:function(e){$.extend(r.validators,e)},mGetValidators:function(){return r.validators},mGetRuleResultsTemplate:function(){return $.extend(!0,{},r.ruleResultsTemplate)},mGetCodeMessage:function(e,n){return void 0!=r.codes[e]?t({label:n},r.codes[e]):t({label:e},r.defaultCodeMessage)},mValidate:function(t){var n=$.extend(!0,{},r.validationResultsTemplate,{data:$.extend(!0,{},t)});for(var a in n.data){var i=n.data[a];n.codes[a]=$.extend(!0,{},r.codeResultsTemplate);for(var o=0,l=i.rules.length;l>o;o++){var s=i.rules[o],u=$.extend(!0,{},r.ruleResultsTemplate);u=r.validators[s]?r.validators[s](i.value):r.validators.missingvalidator(i.value),e(a,s,u,n)}0==n.codes[a].error.length&&0==n.codes[a].success.length&&delete n.codes[a]}return n}}}(),Simplr.Validation.mAddCodes({eMissingValidator:"Missing Validator",eAlphaNumeric:"$[label] is not alphanumeric.",eAmericanExpress:"$[label] is not a valid AMERICAN EXPRESS number.",eDinersClub:"$[label] is not a valid DINERS CLUB number.",eDiscover:"$[label] is not a valid DISCOVER number.",eEmail:"$[label] is not an email address.",eEqual:"$[label] does not match.",eMastercard:"$[label] is not a valid MASTERCARD number.",eEmpty:"$[label] is empty.",eNumber:"$[label] is not a number.",ePhoneNumber:"$[label] is not a valid Phone Number.",ePostalCode:"$[label] is not a Postal Code.",eVisa:"$[label] is not a valid VISA number."}),Simplr.Validation.mAddValidators({missingvalidator:function(){return $.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},alphanumeric:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^\w*$/.test(e)});return t.valid||t.errorCodes.push("eAlphaNumeric"),t},americanexpress:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^3(4|7)\d{2}-?\d{6}-?\d{5}$/.test(e)});return t.valid||t.errorCodes.push("eAmericanExpress"),t},dinersclub:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^3[0,6,8]\d{12}$/.test(e)});return t.valid||t.errorCodes.push("eDinersClub"),t},discover:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^6011-?\d{4}-?\d{4}-?\d{4}$/.test(e)});return t.valid||t.errorCodes.push("eDiscover"),t},email:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(e)});return t.valid||t.errorCodes.push("eEmail"),t},equal:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate());if($.isArray(e))for(var r=0,n=e.length;n>r;r++)Simplr.Util.mEqual([e[0],e[r]])||(t.valid=!1,r=n);return t.valid||t.errorCodes.push("eEqual"),t},mastercard:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/.test(e)});return t.valid||t.errorCodes.push("eMastercard"),t},notempty:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate());return void 0!==e&&null!=e&&("string"==typeof e?t.valid=!(""==$.trim(e)):$.isArray(e)?t.valid=!(0==e.length):"object"==typeof e&&(t.valid=!$.isEmptyObject(e))),t.valid||t.errorCodes.push("eEmpty"),t},number:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:!isNaN(parseFloat(e))&&isFinite(e)});return t.valid||t.errorCodes.push("eNumber"),t},phonenumber:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^\d{10}$/.test(e)});return t.valid||t.errorCodes.push("ePhoneNumber"),t},postalcode:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^\d{5}([\-]?\d{4})?$/.test(e)});return t.valid||t.errorCodes.push("ePostalCode"),t},visa:function(e){var t=$.extend(!0,{},Simplr.Validation.mGetRuleResultsTemplate(),{valid:/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/.test(e)});return t.valid||t.errorCodes.push("eVisa"),t}}),function(){var e={Views:{}};Simplr.View={mAddViews:function(t){for(var r in t){var n=$.extend(!0,{},{html:function(){return""},callback:function(){}},t[r]);e.Views[r]=n}},mData:function(){return e},mRender:function(t){var r=$.extend({name:"",data:"",selector:""},t);$(r.selector).html(e.Views[r.name].html(r.data)),e.Views[r.name].callback(r.selector,r.data)}}}()}();