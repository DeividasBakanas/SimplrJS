// simplr v2.2.0
(function(){Array.prototype.remove=function(a,b){var c=this.slice((b||a)+1||this.length);this.length=0>a?this.length+a:a;return this.push.apply(this,c)};window.Simplr={Config:{Data:{ConsoleActive:!1},mToggleConsole:function(a){$("#_simplr_core_console").remove();Simplr.Config.Data.ConsoleActive=!1;if(a)try{"undefined"!=typeof window.console&&"undefined"!=typeof window.console.group&&($(function(){$("body").append('<p id="_simplr_core_console" style="margin: 0; text-align: center; position: fixed; top: 0; width: 100%; left: 0; border-bottom: 1px solid #000; color: #fff; font-weight: bold; background-color: #f00; padding: 5px; font-size: 11px; opacity: .75;">[console]: Console Messaging Active</p>'); $("#_simplr_core_console").mouseover(function(){$(this).slideUp()}).mouseout(function(){$(this).delay(3E3).slideDown()})}),Simplr.Config.Data.ConsoleActive=!0)}catch(b){}return Simplr.Config.Data.ConsoleActive}}};(function(){var a="";Simplr.Browser={mAddressBarHeight:function(){var a=Simplr.Browser.mDevice();return"iPhone"==a||"iPod"==a||"iPad"==a?60:0},mDevice:function(){return a.match(/iPhone/i)?"iPhone":a.match(/iPod/i)?"iPod":a.match(/iPad/i)?"iPad":a.match(/Android/i)?"Android":"other"},mLocalStorageCapable:function(){return Simplr.Core.Util.mHasLocalStorage()}, mSetUserAgent:function(b){a=b},mTouchCapable:function(){var a=Simplr.Browser.mDevice();return"iPhone"==a||"iPod"==a||"iPad"==a||"Android"==a}};Simplr.Browser.mSetUserAgent(navigator.userAgent)})();(function(){Simplr.Cache={mExpire:function(a){Simplr.Core.Util.mHasLocalStorage()&&(localStorage.removeItem(a),localStorage.removeItem(a+"_data"));return null},mGet:function(a){a=$.extend({key:"",identifier:""},a);if(Simplr.Core.Util.mHasLocalStorage()&&""!=a.key){var b=localStorage.getItem(a.key);if(null!= b&&(b=b.split("|"),2==b.length&&b[0]==a.identifier)){if((new Date).getTime()<=parseInt(b[1],10))return localStorage.getItem(a.key+"_data");Simplr.Cache.mExpire(a.key)}}return null},mSet:function(a){a=$.extend({key:"",identifier:"",data:"",freshness:6E5},a);Simplr.Core.Util.mHasLocalStorage()&&""!=a.key&&(localStorage.setItem(a.key,a.identifier+"|"+((new Date).getTime()+a.freshness)),localStorage.setItem(a.key+"_data",a.data));return a.data}}})();(function(){function a(a){return a.replace(/</g,"&lt;").replace(/>/g, "&gt;").replace(/"/g,"&quot;")}var b={CRUD:{view:!0,"new":!0,update:!0,"delete":!0},Commands:{},Bases:{}};Simplr.Controller={mAddBases:function(a){for(var a=$.isArray(a)?a:[a],d=0,f=a.length;d<f;d++)b.Bases[a[d]]=1},mAddCommands:function(a){for(var d in a){var f=$.extend({route:[],callback:function(){}},a[d]),e=f.route.join("_");""!=e&&(b.Commands[e]=f.callback)}},mData:function(){return b},mExecute:function(a){var d=a.route.join("_");if($.isFunction(b.Commands[d]))b.Commands[d](a)},mRoute:function(c){c= {route:[],url:c,base:"",resources:{},action:"",parameters:{}};"#"==c.url.charAt(0)&&(c.url=c.url.substring(1));"!"==c.url.charAt(0)&&(c.url=c.url.substring(1));var d=c.url.split("?");d[0]=decodeURI(d[0]);var f=d[0],e;for(e in b.Bases)if((d[0]=d[0].replace(e,""))!=f){c.base=e;c.route.push(e);break}d[0]=d[0].split("/");c.action=d[0][d[0].length-1];c.action=b.CRUD[c.action]?c.action:"view";e=!0;for(var f="",g=0,i=d[0].length-1;g<i;g++)""!=d[0][g]&&(e?(f=d[0][g],c.route.push(f),c.resources[f]=""):c.resources[f]= d[0][g],e=!e);if(d[1]){d=d[1].split("&");e=0;for(f=d.length;e<f;e++)g=d[e].split("="),c.parameters[g[0]]=$.trim(a(decodeURIComponent(g[1])))}c.route.push(c.action);return c},mRouteAndExecute:function(a){Simplr.Controller.mExecute(Simplr.Controller.mRoute(a))}};$(window).on("hashchange",{},function(){Simplr.Controller.mRouteAndExecute(window.location.hash)})})();var j;j||(j={});(function(){function a(a){return 10>a?"0"+a:a}function b(a){f.lastIndex=0;return f.test(a)?'"'+a.replace(f,function(a){var d= i[a];return"string"===typeof d?d:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(a,d){var f,i,n,j,p=e,m,k=d[a];k&&"object"===typeof k&&"function"===typeof k.toJSON&&(k=k.toJSON(a));"function"===typeof h&&(k=h.call(d,a,k));switch(typeof k){case "string":return b(k);case "number":return isFinite(k)?""+k:"null";case "boolean":case "null":return""+k;case "object":if(!k)return"null";e+=g;m=[];if("[object Array]"===Object.prototype.toString.apply(k)){j=k.length;for(f=0;f< j;f+=1)m[f]=c(f,k)||"null";n=0===m.length?"[]":e?"[\n"+e+m.join(",\n"+e)+"\n"+p+"]":"["+m.join(",")+"]";e=p;return n}if(h&&"object"===typeof h){j=h.length;for(f=0;f<j;f+=1)"string"===typeof h[f]&&(i=h[f],(n=c(i,k))&&m.push(b(i)+(e?": ":":")+n))}else for(i in k)Object.prototype.hasOwnProperty.call(k,i)&&(n=c(i,k))&&m.push(b(i)+(e?": ":":")+n);n=0===m.length?"{}":e?"{\n"+e+m.join(",\n"+e)+"\n"+p+"}":"{"+m.join(",")+"}";e=p;return n}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON= function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var d=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, e,g,i={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},h;"function"!==typeof j.stringify&&(j.stringify=function(a,d,f){var b;g=e="";if(typeof f==="number")for(b=0;b<f;b=b+1)g=g+" ";else typeof f==="string"&&(g=f);if((h=d)&&typeof d!=="function"&&(typeof d!=="object"||typeof d.length!=="number"))throw Error("JSON.stringify");return c("",{"":a})});"function"!==typeof j.parse&&(j.parse=function(a,c){function f(a,d){var b,e,g=a[d];if(g&&typeof g==="object")for(b in g)if(Object.prototype.hasOwnProperty.call(g, b)){e=f(g,b);e!==void 0?g[b]=e:delete g[b]}return c.call(a,d,g)}var b,a=""+a;d.lastIndex=0;d.test(a)&&(a=a.replace(d,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){b=eval("("+a+")");return typeof c==="function"?f({"":b},""):b}throw new SyntaxError("JSON.parse");})})();Simplr.Conversion= {mObjectToJSONString:function(a,b,c){return j.stringify(a,b,c)},mJSONStringToObject:function(a,b){return j.parse(a,b)}};Simplr.Cookie={mGet:function(a){a=$.extend({name:""},a);return 0<document.cookie.length&&!Simplr.Core.Util.mEmpty(a.name)&&(a=document.cookie.match("(^|;) ?"+a.name+"=([^;]*)(;|$)"))?decodeURIComponent(a[2]):null},mSet:function(a){a=$.extend({name:"",value:"",expireDays:null,path:"/",domain:null,secure:!1},a);if(!Simplr.Core.Util.mEmpty(a.name)){var b=a.name+"="+encodeURIComponent(a.value); if(!Simplr.Core.Util.mEmpty(a.expireDays)){var c=new Date;c.setTime(c.getTime()+864E5*a.expireDays);b+="; expires="+c.toUTCString()}b+=!Simplr.Core.Util.mEmpty(a.path)?"; path="+a.path:"";b+=!Simplr.Core.Util.mEmpty(a.domain)?"; domain="+a.domain:"";b+=a.secure?"; secure":"";document.cookie=b;return!0}return!1},mExpire:function(a){return Simplr.Cookie.mSet($.extend({name:"",expireDays:-1},a))}};Simplr.Core={};(function(){function a(b){if($.isArray(b.message)){console.group(b.group);for(var c=0,d= b.message.length;c<d;c++){var f=$.extend(Simplr.Core.Console.mGetMessageTemplate(),b.message[c]);a(f)}}else console.group(b.message),console.log(b.data);console.groupEnd()}Simplr.Core.Console={mGetMessageTemplate:function(){return{group:"",message:"",data:""}},mMessage:function(b){Simplr.Config.Data.ConsoleActive&&(b=$.extend(Simplr.Core.Console.mGetMessageTemplate(),b),a(b))}}})();(function(){function a(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")} function b(a,c){if(typeof a==typeof c){if("object"==typeof a){if($.isArray(a)){if(a.length==c.length){for(var e=0,g=a.length;e<g;e++)if(!b(a[e],c[e]))return!1;return!0}}else{for(e in a)if(!b(a[e],c[e]))return!1;var i=g=0;for(e in a)g++;for(e in c)i++;return g==i}return!1}return a==c}return!1}var c="undefined"==typeof localStorage?!1:!0;Simplr.Core.Util={mEmpty:function(a){var c=typeof a;return"undefined"!=c&&null!=a?"object"==c?$.isArray(a)?0==a.length:$.isEmptyObject(a):""==$.trim(a):!0},mEqual:function(a){if(!Simplr.Core.Util.mEmpty(a)&& $.isArray(a)){for(var c=!0,e=0,g=a.length;e<g;e++)b(a[0],a[e])||(c=!1,e=g);return c}return!0},mGetUrlParameter:function(d){var c=window.location.search;if(Simplr.Core.Util.mEmpty(c))return null;for(var b={},c=c.substring(1).split("&"),g=0,i=c.length;g<i;g++){var h=c[g].split("=");b[h[0]]=$.trim(a(decodeURIComponent(h[1])))}if(Simplr.Core.Util.mEmpty(d))return b;d=b[d];return"undefined"==typeof d?null:d},mHasLocalStorage:function(){return c}}})();(function(){var a={};Simplr.Core.Ui={mElementInfo:function(a){var a= $.extend({selector:"body"},a),c=$(a.selector).eq(0),a=[c.width(),c.height()],c=c.offset(),c=[c.left,c.top];return{offsets:c,dimensions:a}},mWindowInfo:function(){var a={offsets:[0,0],dimensions:[0,0]};if("number"==typeof window.pageYOffset)a.offsets=[window.pageXOffset,window.pageYOffset];else if(document.body&&(document.body.scrollLeft||document.body.scrollTop))a.offsets=[document.body.scrollLeft,document.body.scrollTop];else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop))a.offsets= [document.documentElement.scrollLeft,document.documentElement.scrollTop];if("number"==typeof window.innerWidth)a.dimensions=[window.innerWidth,window.innerHeight];else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight))a.dimensions=[document.documentElement.clientWidth,document.documentElement.clientHeight];return a},Widget:{mGenerateWidgetID:function(){var b=Math.floor(1E7*Math.random());return Simplr.Core.Util.mEmpty(a[b])?(a[b]=!0,b):Simplr.Core.Ui.Widget.mGenerateWidgetID()}}}})(); (function(a){function b(a,c){var b=c,g;for(g in a)b=b.replace(RegExp("\\$\\["+g+"\\]","g"),escape(a[g]));return unescape(b)}var c={codes:{eEmpty:"$[label] is empty.",eMissingValidator:"Missing Validator"},codeResultsTemplate:{success:[],error:[]},defaultCodeMessage:"$[label] is UNDEFINED",ruleResultsTemplate:{valid:!0,successCodes:[],errorCodes:[]},validators:{missingvalidator:function(){return a.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})}, notempty:function(d){var c=a.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate());"undefined"!=typeof d&&null!=d&&("string"==typeof d?c.valid=""!=a.trim(d):a.isArray(d)?c.valid=0!=d.length:"object"==typeof d&&(c.valid=!a.isEmptyObject(d)));c.valid||c.errorCodes.push("eEmpty");return c}},validationResultsTemplate:{data:"",valid:!0,codes:{}}};Simplr.Core.Validation={mAddCodes:function(d){a.extend(c.codes,d)},mAddValidators:function(d){a.extend(c.validators,d)},mData:function(){return c},mGetCodeMessage:function(a, f){return void 0!=c.codes[a]?b({label:f},c.codes[a]):b({label:a},c.defaultCodeMessage)},mGetRuleResultsTemplate:function(){return a.extend(!0,{},c.ruleResultsTemplate)},mValidate:function(d){var d=a.extend(!0,{},c.validationResultsTemplate,{data:a.extend(!0,{},d)}),b;for(b in d.data){var e=d.data[b];d.codes[b]=a.extend(!0,{},c.codeResultsTemplate);for(var g=0,i=e.rules.length;g<i;g++){var h=e.rules[g],j=a.extend(!0,{},c.ruleResultsTemplate),j=c.validators[h]?c.validators[h](e.value):c.validators.missingvalidator(e.value), h=b,l=d;l.codes[h].success=l.codes[h].success.concat(j.successCodes);l.codes[h].error=l.codes[h].error.concat(j.errorCodes);j.valid||(l.valid=!1)}0==d.codes[b].error.length&&0==d.codes[b].success.length&&delete d.codes[b]}return d}}})(jQuery);Simplr.Core.Validation.mAddCodes({eMissingValidator:"Missing Validator",eAlphaNumeric:"$[label] is not alphanumeric.",eAmericanExpress:"$[label] is not a valid AMERICAN EXPRESS number.",eDinersClub:"$[label] is not a valid DINERS CLUB number.",eDiscover:"$[label] is not a valid DISCOVER number.", eEmail:"$[label] is not an email address.",eEqual:"$[label] does not match.",eMastercard:"$[label] is not a valid MASTERCARD number.",eEmpty:"$[label] is empty.",eNumber:"$[label] is not a number.",ePhoneNumber:"$[label] is not a valid Phone Number.",ePostalCode:"$[label] is not a Postal Code.",eVisa:"$[label] is not a valid VISA number."});Simplr.Core.Validation.mAddValidators({missingvalidator:function(){return $.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})}, alphanumeric:function(a){a=$.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^\w*$/.test(a)});a.valid||a.errorCodes.push("eAlphaNumeric");return a},americanexpress:function(a){a=$.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^3(4|7)\d{2}-?\d{6}-?\d{5}$/.test(a)});a.valid||a.errorCodes.push("eAmericanExpress");return a},dinersclub:function(a){a=$.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^3[0,6,8]\d{12}$/.test(a)});a.valid|| a.errorCodes.push("eDinersClub");return a},discover:function(a){a=$.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^6011-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eDiscover");return a},email:function(a){a=$.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(a)});a.valid||a.errorCodes.push("eEmail");return a},equal:function(a){var b=$.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate()); if($.isArray(a))for(var c=0,d=a.length;c<d;c++)Simplr.Core.Util.mEqual([a[0],a[c]])||(b.valid=!1,c=d);b.valid||b.errorCodes.push("eEqual");return b},mastercard:function(a){a=$.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eMastercard");return a},notempty:function(a){var b=$.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate());"undefined"!=typeof a&&null!=a&&("string"==typeof a?b.valid=""!=$.trim(a): $.isArray(a)?b.valid=0!=a.length:"object"==typeof a&&(b.valid=!$.isEmptyObject(a)));b.valid||b.errorCodes.push("eEmpty");return b},number:function(a){a=$.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:!isNaN(parseFloat(a))&&isFinite(a)});a.valid||a.errorCodes.push("eNumber");return a},phonenumber:function(a){a=$.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^\d{10}$/.test(a)});a.valid||a.errorCodes.push("ePhoneNumber");return a},postalcode:function(a){a= $.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^\d{5}([\-]?\d{4})?$/.test(a)});a.valid||a.errorCodes.push("ePostalCode");return a},visa:function(a){a=$.extend(!0,{},Simplr.Core.Validation.mGetRuleResultsTemplate(),{valid:/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eVisa");return a}});(function(){var a=["notempty"],b={},c={};Simplr.Form={mAddValidators:function(a){Simplr.Core.Validation.mAddValidators(a)},mGetValidators:function(){return Simplr.Core.Validation.mData().validators}, mAddCodes:function(a){Simplr.Core.Validation.mAddCodes(a)},mGetCodes:function(){return Simplr.Core.Validation.mData().codes},mAddLabelAssociation:function(a){$.extend(c,a)},mAddValidationAssociation:function(a){$.extend(b,a)},mGetValues:function(a){var c={};$("input, select, textarea",a).each(function(){var a=$(this);if(!a.is("[type='button']")&&!a.is("[type='reset']")&&!(a.is("[type='submit']")||a.is("[type='radio']")&&!a.is(":checked")))a.is("[type='checkbox']")?c[$(this).attr("name")]=$(this).is(":checked")? "on"!=$(this).val()?$(this).val():!0:!1:c[$(this).attr("name")]=$(this).val()});return c},mValidateValuesAndRender:function(d,f){var e={},g;for(g in f){for(var i={value:f[g],label:c[g]?c[g]:"_LABEL_",rules:[]},h=0,j=a.length;h<j;h++)i.rules.push(a[h]);if($.isFunction(b[g]))b[g](i.rules);e[g]=i}e=Simplr.Core.Validation.mValidate(e);$(".formError,.errorField",d).filter("._simplr").removeClass("formError").removeClass("errorField");$(".informationText,.errorText",d).filter("._simplr").remove();for(var l in e.codes){g= e.codes[l];g=[g.error,g.success];i="";for(h=0;2>h;h++)0<g[h].length&&(i+='<p class="'+(0==h?"errorText":"informationText")+' _simplr">'+Simplr.Core.Validation.mGetCodeMessage(g[h][0],e.data[l].label)+"</p>");$("[name='"+l+"']:first",d).addClass("errorField _simplr").closest(".formEntry").addClass("formError _simplr").append(i)}return e.valid}}})();var q=function(a,b){"string"==typeof a&&(a=document.getElementById(a));if(1!=a.nodeType)return!1;var c=a.childNodes,d="";if(!b)for(var f=0;f<c.length;f++)if(3== c[f].nodeType)var e=c[f].nodeValue,e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),d=d+e;else if(8==c[f].nodeType)d+="<\!--"+c[f].nodeValue+"--\>";else{for(var d=d+("<"+c[f].nodeName.toLowerCase()),e=c[f].attributes,g=0;g<e.length;g++){var i=e[g].nodeName.toLowerCase(),h=e[g].nodeValue;"style"==i&&c[f].style.cssText?d+=' style="'+c[f].style.cssText.toLowerCase()+'"':h&&"contenteditable"!=i&&(d+=" "+i+'="'+h+'"')}d+=">"+q(c[f]);d+="</"+c[f].nodeName.toLowerCase()+">"}return d};(function(){function a(c){for(;0< $(".layout-component",c).size();)a($(".layout-component:eq(0)",c));var d={};d[c.attr("id").split("-")[1]]=q(c.get(0));Simplr.Layout.mAddComponents(d);c.remove()}var b={Components:{},GlobalTokens:{}};Simplr.Layout={mAddComponents:function(a){for(var d in a)b.Components[d]=$.trim(a[d].replace(/\n/g,"").replace(/\s{1,}/g," "))},mAddGlobalTokens:function(a){$.extend(b.GlobalTokens,a)},mAssembleLayout:function(a){var d="";if(a&&a.component&&a.tokens)for(var b=$.isArray(a.tokens)?a.tokens:[a.tokens],e= 0,g=b.length;e<g;e++){var i={},h;for(h in b[e]){var j=i,l=h,o;o=b[e][h];o="object"==typeof o?Simplr.Layout.mAssembleLayout(o):o;j[l]=o}d+=Simplr.Layout.mReplaceTokens(i,Simplr.Layout.mGetComponent(a.component))}return d},mData:function(){return b},mGetComponent:function(c){"undefined"==typeof b.Components[c]&&(0<$("#layout-"+c).size()?a($("#layout-"+c)):b.Components[c]=null);return b.Components[c]},mReplaceTokens:function(a,d){if(null!=d){$.extend(a,b.GlobalTokens);for(var f in a)d=d.replace(RegExp("\\$\\["+ f+"\\]","g"),escape(a[f]))}return unescape(d)}}})();(function(){function a(a){var d={services:[],data:{envID:b.Env}};$.extend(!0,d,a.options);if(Simplr.Core.Util.mEmpty(d.services)){var f=[],e;for(e in b.Services)f.push(e);d.services=f}f=$.extend(Simplr.Core.Console.mGetMessageTemplate(),{group:"simplr.trigger: "+b.Env+" environment",message:[]});e=0;for(var g=d.services.length;e<g;e++){var i=d.services[e];$.isFunction(b.Services[i][a.type])&&b.Services[i].data.environmentIDs[b.Env]&&f.message.push({message:"["+ i+"] "+a.type+" triggered.",data:b.Services[i][a.type](d.data)})}0<f.message.length&&Simplr.Core.Console.mMessage(f)}var b={Env:"_simplr",Services:{}};Simplr.Trigger={mAddServices:function(c){for(var d in c)b.Services[d]=$.extend({data:{environmentIDs:{}},onLoad:function(){},onPage:function(){},onEvent:function(){},onTransaction:function(){}},c[d]),a({type:"onLoad",options:{services:[d]}})},mData:function(){return b},mSetEnvironment:function(a){b.Env=a},mOnPage:function(c){a({type:"onPage",options:$.extend({}, c)})},mOnEvent:function(c){a({type:"onEvent",options:$.extend({},c)})},mOnTransaction:function(c){a({type:"onTransaction",options:$.extend({},c)})}}})();Simplr.Ui={Widget:{}};(function(){function a(a){var f=$("#"+a.id);0==f.size()?$("body").append('<div id="'+a.id+'" style="position: absolute;"></div>'):(f.removeClass(b).removeClass(c),$(a.closeSelector).unbind("click.simplr.layer.destroy."+a.id));var f=$("#"+a.id),e=!(null!=a.xPos&&null!=a.yPos);e?(a.keepCentered&&f.addClass(c),Simplr.Ui.Layer.mCenter(a.id)): f.css("left",a.xPos+"px").css("top",a.yPos+"px");f.html(a.defaultContent);e&&Simplr.Ui.Layer.mCenter(a.id);$(a.closeSelector).bind("click.simplr.layer.destroy."+a.id,function(c){c.preventDefault();Simplr.Ui.Layer.mDestroy({id:a.id,closeSelector:a.closeSelector})})}var b="_simplr_centerLayer",c="_simplr_keepCenterLayer";Simplr.Ui.Layer={mCenter:function(a){if(!Simplr.Core.Util.mEmpty(a)){var a=$("#"+a),f=a.width(),e=a.height(),g=Simplr.Core.Ui.mWindowInfo(),i=0,i=(g.dimensions[0]-f)/2,i=(0>i?20:i)+ g.offsets[0],h=0,h=(g.dimensions[1]-e)/2,h=(0>h?20:h)+g.offsets[1];(f>g.dimensions[0]||e>g.dimensions[1])&&a.hasClass(c)&&a.removeClass(c).addClass(b);a.css("top",h+"px").css("left",i+"px")}},mCreate:function(c){var b=$.extend({ajax:null,callback:null,closeSelector:"#_simplr_layerClose",defaultContent:"",id:"_simplr_layer",isOverlay:!1,keepCentered:!1,xPos:null,yPos:null},c);b.isOverlay&&(b.id="_simplr_layer"==b.id?"_simplr_overlay":b.id,b.closeSelector="#_simplr_layerClose"==b.closeSelector?"#_simplr_overlayClose": b.closeSelector,b.xPos=0,b.yPos=0);a(b);if(null!=b.ajax){var e=b.ajax.success;b.ajax.success=function(c,d){b.defaultContent=c;a(b);$.isFunction(e)&&e(c,d)};$.ajax(b.ajax)}else $.isFunction(b.callback)&&b.callback();b.isOverlay&&$("#"+b.id).css({position:"fixed",width:"100%",height:"100%"})},mDestroy:function(a){a=$.extend({id:"_simplr_layer",closeSelector:"#_simplr_layerClose"},a);Simplr.Core.Util.mEmpty(a.id)||($("#"+a.id).remove(),$(a.closeSelector).unbind("click.simplr.ui.layer.destroy."+a.id))}}; $(function(){$(window).bind("resize.simplr.ui.layer",function(){$("."+c+",."+b).each(function(a,f){$(f).addClass(c).removeClass(b);Simplr.Ui.Layer.mCenter($(f).attr("id"))})}).bind("scroll.simplr.ui.layer",function(){$("."+c).each(function(a,b){Simplr.Ui.Layer.mCenter($(b).attr("id"))})})})})();Simplr.Ui.mNewBrowserWindow=function(a){a=$.extend({url:"",width:500,height:500,name:"_simplr_newBrowserWindow"},a);if(!Simplr.Core.Util.mEmpty(a.url)){var b="width="+a.width+",height="+a.height,c=a.url,d= a.name;delete a.url;delete a.width;delete a.height;delete a.name;for(var f in a)b+=","+f+"="+a[f];f=window.open(c,d,b);null!=f&&f.focus()}};(function(){function a(a){this.data=$.extend({animateSpeed:200,containerSelector:"#_simplr_widget_trackableScrollingElement_container",elementSelector:"#_simplr_widget_trackableScrollingElement_element",offset:10,refreshSpeed:500,tolerance:10},a);this.data._PRIVATE={evtString:"scroll.simplr.widget.trackableScrollingElement."+Simplr.Core.Ui.Widget.mGenerateWidgetID(), timeout:null,previousOffset:0};this.destroy();var c=this;$(window).bind(c.data._PRIVATE.evtString,function(){clearTimeout(c.data._PRIVATE.timeout);c.data._PRIVATE.timeout=setTimeout(function(){var a=$(c.data.containerSelector).eq(0),b=a.children(c.data.elementSelector).eq(0);if(a.is(":visible")&&b.is(":visible")){var a=Simplr.Core.Ui.mElementInfo({selector:a}),e=Simplr.Core.Ui.mElementInfo({selector:b}),g=Simplr.Core.Ui.mWindowInfo(),i=0>g.offsets[1]-c.data._PRIVATE.previousOffset;c.data._PRIVATE.previousOffset= g.offsets[1];var h=null,j=[e.offsets[1]-c.data.tolerance,e.offsets[1]+c.data.tolerance],l=[e.offsets[1]+e.dimensions[1]-c.data.tolerance,e.offsets[1]+e.dimensions[1]+c.data.tolerance];g.dimensions[1]>e.dimensions[1]&&(g.offsets[1]<j[0]||g.offsets[1]>j[1])?h=g.offsets[1]-a.offsets[1]+c.data.offset:i&&g.offsets[1]<j[0]?h=g.offsets[1]-a.offsets[1]+c.data.offset:g.offsets[1]+e.dimensions[1]>l[1]&&(h=g.offsets[1]-a.offsets[1]-(e.dimensions[1]-g.dimensions[1])-c.data.offset);null!=h&&(0>h?h=0:h>a.dimensions[1]- e.dimensions[1]&&(h=a.dimensions[1]-e.dimensions[1]),b.stop().animate({marginTop:h},c.data.animateSpeed))}else b.css("margin-top",0)},c.data.refreshSpeed)})}Simplr.Ui.Widget.oTrackableScrollingElement=function(b){return new a(b)};a.prototype.reset=function(){$(this.data.elementSelector).eq(0).css("margin-top",0)};a.prototype.destroy=function(){this.reset();$(window).unbind(this.data._PRIVATE.evtString)}})();Simplr.Util={mEmpty:function(a){return Simplr.Core.Util.mEmpty(a)},mEqual:function(a){return Simplr.Core.Util.mEqual(a)}, mGetUrlParameter:function(a){return Simplr.Core.Util.mGetUrlParameter(a)},mHasLocalStorage:function(){return Simplr.Core.Util.mHasLocalStorage()},mTruncateString:function(a){a=$.extend({string:"",size:5,postfix:"",smart:!0},a);if(a.string.length>a.size){var b=a.size-a.postfix.length-1,c=b+1;if(a.smart)for(;" "!=a.string.charAt(b)&&0<b;)b--;return a.string.substring(0,0==b?c:b+1)+a.postfix}return a.string}};Simplr.Validation={mAddCodes:function(a){Simplr.Core.Validation.mAddCodes(a)},mGetCodes:function(){return Simplr.Core.Validation.mData().codes}, mAddValidators:function(a){Simplr.Core.Validation.mAddValidators(a)},mGetValidators:function(){return Simplr.Core.Validation.mData().validators},mGetRuleResultsTemplate:function(){return Simplr.Core.Validation.mGetRuleResultsTemplate()},mGetCodeMessage:function(a,b){return Simplr.Core.Validation.mGetCodeMessage(a,b)},mValidate:function(a){return Simplr.Core.Validation.mValidate(a)}};(function(){var a={Views:{}};Simplr.View={mAddViews:function(b){for(var c in b){var d=$.extend(!0,{},{html:function(){return""}, callback:function(){}},b[c]);a.Views[c]=d}},mData:function(){return a},mRender:function(b){b=$.extend({name:"",data:"",selector:""},b);$(b.selector).html(a.Views[b.name].html(b.data));a.Views[b.name].callback(b.selector,b.data)}}})()})();