(function(n){Array.prototype.remove=function(b,g){var a=this.slice((g||b)+1||this.length);this.length=b<0?this.length+b:b;return this.push.apply(this,a)};var d={config:{console:!1}};(function(b){function g(a){if(b.isArray(a.message)){console.group(a.group);for(var c=0,e=a.message.length;c<e;c++){var f=b.extend(d.console.mGetMessageTemplate(),a.message[c]);g(f)}}else console.group(a.message),console.log(a.data);console.groupEnd()}b.extend(!0,d,{console:{mGetMessageTemplate:function(){return{group:"", message:"",data:""}},mMessage:function(a){d.config.console&&(a=b.extend(d.console.mGetMessageTemplate(),a),g(a))}}})})(jQuery);(function(b){function g(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function a(e,c){if(typeof e==typeof c){if(typeof e=="object"){if(b.isArray(e)){if(e.length==c.length){for(var h=0,g=e.length;h<g;h++)if(!a(e[h],c[h]))return!1;return!0}}else{var d=!0;b.each(e,function(b,e){if(!a(e,c[b]))return d=!1});if(d){var j=0,r=0; b.each(e,function(){j++});b.each(c,function(){r++});return j==r}}return!1}return e==c}return!1}var c=typeof localStorage=="undefined"?!1:!0;b.extend(!0,d,{util:{mEmpty:function(a){var c=typeof a;if(c!="undefined"&&a!=null){if(c=="object"){if(b.isArray(a))return a.length==0;return b.isEmptyObject(a)}return b.trim(a)==""}return!0},mEqual:function(e){if(!d.util.mEmpty(e)&&b.isArray(e)){for(var c=!0,h=0,g=e.length;h<g;h++)a(e[0],e[h])||(c=!1,h=g);return c}return!0},mGetUrlParameter:function(a){var c= window.location.search;if(d.util.mEmpty(c))return null;else{for(var h={},c=c.substring(1).split("&"),l=0,k=c.length;l<k;l++){var j=c[l].split("=");h[j[0]]=b.trim(g(decodeURIComponent(j[1])))}return d.util.mEmpty(a)?h:(a=h[a],typeof a=="undefined"?null:a)}},mHasLocalStorage:function(){return c}}})})(jQuery);(function(b){var g={};b.extend(!0,d,{ui:{mElementInfo:function(a){var a=b.extend({selector:"body"},a),c=b(a.selector).eq(0),a=[c.width(),c.height()],c=c.offset(),c=[c.left,c.top];return{offsets:c, dimensions:a}},mWindowInfo:function(){var a={};a.offsets=typeof window.pageYOffset=="number"?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0];a.dimensions=[b(window).width(),b(window).height()];return a},widget:{mGenerateWidgetID:function(){var a= Math.floor(Math.random()*1E7);return d.util.mEmpty(g[a])?(g[a]=!0,a):d.ui.widget.mGenerateWidgetID()}}}})})(jQuery);(function(b){function g(a,e){var f=e;b.each(a,function(a,b){f=f.replace(RegExp("\\$\\["+a+"\\]","g"),escape(b))});return unescape(f)}var a={codes:{eEmpty:"$[label] is empty.",eMissingValidator:"Missing Validator"},codeResultsTemplate:{success:[],error:[]},defaultCodeMessage:"$[label] is UNDEFINED",ruleResultsTemplate:{valid:!0,successCodes:[],errorCodes:[]},validators:{missingvalidator:function(){return b.extend(!0, {},d.validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},notempty:function(a){var e=b.extend(!0,{},d.validation.mGetRuleResultsTemplate());if(typeof a!="undefined"&&a!=null)if(typeof a=="string")e.valid=b.trim(a)!="";else if(b.isArray(a))e.valid=a.length!=0;else if(typeof a=="object")e.valid=!b.isEmptyObject(a);e.valid||e.errorCodes.push("eEmpty");return e}},validationResultsTemplate:{data:"",valid:!0,codes:{}}};b.extend(!0,d,{validation:{mAddCodes:function(c){b.extend(a.codes, c)},mAddValidators:function(c){b.extend(a.validators,c)},mGetCodes:function(){return a.codes},mGetCodeMessage:function(b,e){if(a.codes[b]!=void 0)return g({label:e},a.codes[b]);return g({label:b},a.defaultCodeMessage)},mGetRuleResultsTemplate:function(){return b.extend(!0,{},a.ruleResultsTemplate)},mGetValidators:function(){return a.validators},mValidate:function(c){var e=b.extend(!0,{},a.validationResultsTemplate,{data:b.extend(!0,{},c)});b.each(e.data,function(c,h){e.codes[c]=b.extend(!0,{},a.codeResultsTemplate); for(var g=0,d=h.rules.length;g<d;g++){var j=h.rules[g],r=b.extend(!0,{},a.ruleResultsTemplate),r=a.validators[j]?a.validators[j](h.value):a.validators.missingvalidator(h.value),j=c,s=e;s.codes[j].success=s.codes[j].success.concat(r.successCodes);s.codes[j].error=s.codes[j].error.concat(r.errorCodes);if(!r.valid)s.valid=!1}e.codes[c].error.length==0&&e.codes[c].success.length==0&&delete e.codes[c]});return e}}})})(jQuery);var i=window.simplr={config:{mToggleConsole:function(b){n("#_simplr_core_console").remove(); d.config.console=!1;if(b)try{if(typeof window.console!="undefined"&&typeof window.console.group!="undefined")n(function(){var a=n("<p></p>").attr("id","_simplr_core_console").css({textAlign:"center",position:"fixed",top:"0",width:"100%",borderBottom:"1px solid #000",color:"#000",backgroundColor:"#f00",padding:"5px",fontSize:"11px",opacity:"0.75"}).text("[console]: Console Messaging Active");n("body").append(a);a.mouseover(function(){n(this).slideUp()});a.mouseout(function(){n(this).delay(3E3).slideDown()})}), d.config.console=!0}catch(g){}return d.config.console}}};(function(b){var g={userAgent:""};b.extend(i,{browser:{mAddressBarHeight:function(){var b=a.mDevice();return b=="iPhone"||b=="iPod"||b=="iPad"?60:0},mDevice:function(){if(g.userAgent.match(/iPhone/i))return"iPhone";else if(g.userAgent.match(/iPod/i))return"iPod";else if(g.userAgent.match(/iPad/i))return"iPad";else if(g.userAgent.match(/Android/i))return"Android";return"other"},mLocalStorageCapable:function(){return d.util.mHasLocalStorage()}, mSetUserAgent:function(a){g.userAgent=a},mTouchCapable:function(){var b=a.mDevice();return b=="iPhone"||b=="iPod"||b=="iPad"||b=="Android"}}});var a=i.browser;a.mSetUserAgent(navigator.userAgent)})(jQuery);(function(b){b.extend(i,{cache:{mExpire:function(a){d.util.mHasLocalStorage()&&(localStorage.removeItem(a),localStorage.removeItem(a+"_data"));return null},mGet:function(a){a=b.extend({key:"",identifier:""},a);if(d.util.mHasLocalStorage()&&a.key!=""){var c=localStorage.getItem(a.key);if(c!=null&& (c=c.split("|"),c.length==2&&c[0]==a.identifier))if((new Date).getTime()<=parseInt(c[1],10))return localStorage.getItem(a.key+"_data");else g.mExpire(a.key)}return null},mSet:function(a){a=b.extend({key:"",identifier:"",data:"",freshness:6E5},a);d.util.mHasLocalStorage()&&a.key!=""&&(localStorage.setItem(a.key,a.identifier+"|"+((new Date).getTime()+a.freshness)),localStorage.setItem(a.key+"_data",a.data));return a.data}}});var g=i.cache})(jQuery);(function(b){b.extend(i,{cookie:{mGet:function(a){a= b.extend({name:""},a);if(document.cookie.length>0&&!d.util.mEmpty(a.name)&&(a=document.cookie.match("(^|;) ?"+a.name+"=([^;]*)(;|$)")))return decodeURIComponent(a[2]);return null},mSet:function(a){a=b.extend({name:"",value:"",expireDays:null,path:"/",domain:null,secure:!1},a);if(!d.util.mEmpty(a.name)){var c=a.name+"="+encodeURIComponent(a.value);if(!d.util.mEmpty(a.expireDays)){var e=new Date;e.setTime(e.getTime()+a.expireDays*864E5);c+="; expires="+e.toUTCString()}c+=!d.util.mEmpty(a.path)?"; path="+ a.path:"";c+=!d.util.mEmpty(a.domain)?"; domain="+a.domain:"";c+=a.secure?"; secure":"";document.cookie=c;return!0}return!1},mExpire:function(a){return g.mSet(b.extend({name:"",expireDays:-1},a))}}});var g=i.cookie})(jQuery);(function(b,g,a){function c(a){a=a||location.href;return"#"+a.replace(/^[^#]*#?(.*)$/,"$1")}var e="hashchange",f=document,h,d=b.event.special,k=f.documentMode,j="on"+e in g&&(k===a||k>7);b.fn[e]=function(a){return a?this.bind(e,a):this.trigger(e)};b.fn[e].delay=50;d[e]=b.extend(d[e], {setup:function(){if(j)return!1;b(h.start)},teardown:function(){if(j)return!1;b(h.stop)}});h=function(){function h(){var a=c(),f=o(k);if(a!==k)p(k=a,f),b(g).trigger(e);else if(f!==k)location.href=location.href.replace(/#.*/,"")+f;l=setTimeout(h,b.fn[e].delay)}var d={},l,k=c(),i=function(a){return a},p=i,o=i;d.start=function(){l||h()};d.stop=function(){l&&clearTimeout(l);l=a};b.browser.msie&&!j&&function(){var a,g;d.start=function(){if(!a)g=(g=b.fn[e].src)&&g+c(),a=b('<iframe tabindex="-1" title="empty"/>').hide().one("load", function(){g||p(c());h()}).attr("src",g||"javascript:0").insertAfter("body")[0].contentWindow,f.onpropertychange=function(){try{if(event.propertyName==="title")a.document.title=f.title}catch(b){}}};d.stop=i;o=function(){return c(a.location.href)};p=function(c,h){var g=a.document,d=b.fn[e].domain;if(c!==h)g.title=f.title,g.open(),d&&g.write('<script>document.domain="'+d+'"<\/script>'),g.close(),a.location.hash=c}}();return d}()})(jQuery,this);(function(b){var g={crud:{view:!0,"new":!0,update:!0,"delete":!0}, commands:{},bases:{}};b.extend(i,{controller:{mAddBases:function(a){for(var a=b.isArray(a)?a:[a],e=0,f=a.length;e<f;e++)g.bases[a[e]]=1},mAddCommands:function(a){b.each(a,function(a,c){var h=b.extend({route:[],callback:function(){}},c),d=h.route.join("_");if(d!="")g.commands[d]=h.callback})},mExecute:function(a){var b=a.route.join("_");try{g.commands[b](a)}catch(f){}},mGetCommands:function(){return g.commands},mGetBases:function(){return g.bases},mRoute:function(a){var e={route:[],url:a,base:"",resources:{}, action:"",parameters:{}};if(e.url[0]=="#")e.url=e.url.substring(1);if(e.url[0]=="!")e.url=e.url.substring(1);var f=e.url.split("?"),h=f[0];b.each(g.bases,function(a){if((f[0]=f[0].replace(a,""))!=h)return e.base=a,e.route.push(a),!1});f[0]=f[0].split("/");e.action=f[0][f[0].length-1];e.action=g.crud[e.action]?e.action:"view";for(var a=!0,d="",k=0,j=f[0].length-1;k<j;k++)f[0][k]!=""&&(a?(d=f[0][k],e.route.push(d),e.resources[d]=""):e.resources[d]=f[0][k],a=!a);if(f[1]){a=f[1].split("&");d=0;for(k= a.length;d<k;d++)j=a[d].split("="),e.parameters[j[0]]=b.trim(j[1].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"))}e.route.push(e.action);return e},mRouteAndExecute:function(b){a.mExecute(a.mRoute(decodeURI(b)))}}});var a=i.controller;b(function(){b(window).hashchange(function(){window.location.hash!=""&&a.mRouteAndExecute(window.location.hash)})})})(jQuery);var q;q||(q={});(function(){function b(a){return a<10?"0"+a:a}function d(a){e.lastIndex=0;return e.test(a)? '"'+a.replace(e,function(a){var b=l[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function a(b,e){var c,l,i,n,p=f,o,m=e[b];m&&typeof m==="object"&&typeof m.toJSON==="function"&&(m=m.toJSON(b));typeof k==="function"&&(m=k.call(e,b,m));switch(typeof m){case "string":return d(m);case "number":return isFinite(m)?String(m):"null";case "boolean":case "null":return String(m);case "object":if(!m)return"null";f+=h;o=[];if(Object.prototype.toString.apply(m)=== "[object Array]"){n=m.length;for(c=0;c<n;c+=1)o[c]=a(c,m)||"null";i=o.length===0?"[]":f?"[\n"+f+o.join(",\n"+f)+"\n"+p+"]":"["+o.join(",")+"]";f=p;return i}if(k&&typeof k==="object"){n=k.length;for(c=0;c<n;c+=1)typeof k[c]==="string"&&(l=k[c],(i=a(l,m))&&o.push(d(l)+(f?": ":":")+i))}else for(l in m)Object.prototype.hasOwnProperty.call(m,l)&&(i=a(l,m))&&o.push(d(l)+(f?": ":":")+i);i=o.length===0?"{}":f?"{\n"+f+o.join(",\n"+f)+"\n"+p+"}":"{"+o.join(",")+"}";f=p;return i}}if(typeof Date.prototype.toJSON!== "function")Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()};var c=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,e=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g, f,h,l={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},k;if(typeof q.stringify!=="function")q.stringify=function(b,e,c){var d;h=f="";if(typeof c==="number")for(d=0;d<c;d+=1)h+=" ";else typeof c==="string"&&(h=c);if((k=e)&&typeof e!=="function"&&(typeof e!=="object"||typeof e.length!=="number"))throw Error("JSON.stringify");return a("",{"":b})};if(typeof q.parse!=="function")q.parse=function(a,b){function e(a,c){var f,h,d=a[c];if(d&&typeof d==="object")for(f in d)Object.prototype.hasOwnProperty.call(d, f)&&(h=e(d,f),h!==void 0?d[f]=h:delete d[f]);return b.call(a,c,d)}var f,a=String(a);c.lastIndex=0;c.test(a)&&(a=a.replace(c,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+a+")"),typeof b==="function"?e({"":f},""):f;throw new SyntaxError("JSON.parse");}})();(function(b){b.extend(i, {conversion:{mObjectToJSONString:function(b,a,c){return q.stringify(b,a,c)},mJSONStringToObject:function(b,a){return q.parse(b,a)}}})})(jQuery);(function(b){function g(a,f){var h=[c.classes.textError,c.classes.textInformation,c.classes.formError,c.classes.fieldError,c.classes.formEntry],g=["."+h[0],"."+h[1],"."+h[2],"."+h[3],"."+h[4]];b(g[2]+","+g[3],a).filter("._simplr").removeClass(h[2]).removeClass(h[3]);b(g[1]+","+g[0],a).filter("._simplr").remove();b.each(f.codes,function(c,j){var i="";b.each([j.error, j.success],function(a,b){for(var e=0,g=b.length;e<g;e++)i+='<p class="'+h[a]+' _simplr">'+d.validation.mGetCodeMessage(b[e],f.data[c].label)+"</p>",e=g;return!1});b("[name='"+c+"']:first",a).addClass(h[3]+" _simplr").closest(g[4]).addClass(h[2]+" _simplr").append(i)})}function a(a){var f={};b.each(a,function(a,b){for(var e={value:b,label:c.labels[a]?c.labels[a]:c.defaultLabel,rules:[]},d=0,g=c.defaultRules.length;d<g;d++)e.rules.push(c.defaultRules[d]);try{c.rules[a](e.rules)}catch(i){}f[a]=e});return f} var c={classes:{formEntry:"formEntry",formError:"formError",fieldError:"errorField",textError:"errorText",textInformation:"informationText"},defaultRules:["notempty"],defaultLabel:"_LABEL_",rules:{},labels:{}};b.extend(!0,i,{form:{mAddValidators:function(a){d.validation.mAddValidators(a)},mGetValidators:function(){return d.validation.mGetValidators()},mAddCodes:function(a){d.validation.mAddCodes(a)},mGetCodes:function(){return d.validation.mGetCodes()},mAddLabelAssociation:function(a){b.extend(c.labels, a)},mAddValidationAssociation:function(a){b.extend(c.rules,a)},mGetValues:function(a){var c={};b("input[type='checkbox']",a).each(function(){c[b(this).attr("name")]=b(this).is(":checked")?b(this).val()!="on"?b(this).val():!0:!1});b("input[type='text'], input[type='password'], input[type='hidden'], input[type='radio']:checked, select, textarea",a).each(function(){c[b(this).attr("name")]=b(this).val()});return c},mValidateValuesAndRender:function(b,c){var h=a(c),h=d.validation.mValidate(h);g(b,h);return h.valid}}})})(jQuery); (function(b){function g(a,c){var e=!1;if(typeof a==typeof c)if(b.isArray(a)){if(a.length==c.length)for(var e=!0,f=0,d=a.length;f<d;f++)g(a[f],c[f])||(e=!1,f=d)}else if(b.isPlainObject(a)){if(e=!0,b.each(a,function(a,b){if(!g(b,c[a]))return e=!1}),e){var l=0,k=0;b.each(a,function(){l++});b.each(c,function(){k++});e=l==k}}else e=a==c;return e}d.validation.mAddCodes({eMissingValidator:"Missing Validator",eAlphaNumeric:"$[label] is not alphanumeric.",eAmericanExpress:"$[label] is not a valid AMERICAN EXPRESS number.", eDinersClub:"$[label] is not a valid DINERS CLUB number.",eDiscover:"$[label] is not a valid DISCOVER number.",eEmail:"$[label] is not an email address.",eEqual:"$[label] does not match.",eMastercard:"$[label] is not a valid MASTERCARD number.",eEmpty:"$[label] is empty.",eNumber:"$[label] is not a number.",ePhoneNumber:"$[label] is not a valid Phone Number.",ePostalCode:"$[label] is not a Postal Code.",eVisa:"$[label] is not a valid VISA number."});d.validation.mAddValidators({missingvalidator:function(){return b.extend(!0, {},d.validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},alphanumeric:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^\w*$/.test(a)});a.valid||a.errorCodes.push("eAlphaNumeric");return a},americanexpress:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^3(4|7)\d{2}-?\d{6}-?\d{5}$/.test(a)});a.valid||a.errorCodes.push("eAmericanExpress");return a},dinersclub:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(), {valid:/^3[0,6,8]\d{12}$/.test(a)});a.valid||a.errorCodes.push("eDinersClub");return a},discover:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^6011-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eDiscover");return a},email:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(a)});a.valid||a.errorCodes.push("eEmail");return a},equal:function(a){var c=b.extend(!0,{},d.validation.mGetRuleResultsTemplate()); if(b.isArray(a))for(var e=0,f=a.length;e<f;e++)if(!g(a[0],a[e]))c.valid=!1,e=f;c.valid||c.errorCodes.push("eEqual");return c},mastercard:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eMastercard");return a},notempty:function(a){var c=b.extend(!0,{},d.validation.mGetRuleResultsTemplate());if(typeof a!="undefined"&&a!=null)if(typeof a=="string")c.valid=b.trim(a)!="";else if(b.isArray(a))c.valid=a.length!= 0;else if(typeof a=="object")c.valid=!b.isEmptyObject(a);c.valid||c.errorCodes.push("eEmpty");return c},number:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:!isNaN(parseFloat(a))&&isFinite(a)});a.valid||a.errorCodes.push("eNumber");return a},phonenumber:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^\d{10}$/.test(a)});a.valid||a.errorCodes.push("ePhoneNumber");return a},postalcode:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(), {valid:/^\d{5}([\-]?\d{4})?$/.test(a)});a.valid||a.errorCodes.push("ePostalCode");return a},visa:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eVisa");return a}})})(jQuery);var t=function(b,d){typeof b=="string"&&(b=document.getElementById(b));if(b.nodeType!=1)return!1;var a=b.childNodes,c="";if(!d)for(var e=0;e<a.length;e++)if(a[e].nodeType==3){var f=a[e].nodeValue,f=f.replace(/</g,"&lt;"),f=f.replace(/>/g, "&gt;");c+=f}else if(a[e].nodeType==8)c+="<\!--"+a[e].nodeValue+"--\>";else{c+="<"+a[e].nodeName.toLowerCase();for(var f=a[e].attributes,h=0;h<f.length;h++){var l=f[h].nodeName.toLowerCase(),k=f[h].nodeValue;l=="style"&&a[e].style.cssText?c+=' style="'+a[e].style.cssText.toLowerCase()+'"':k&&l!="contenteditable"&&(c+=" "+l+'="'+k+'"')}c+=">"+t(a[e]);c+="</"+a[e].nodeName.toLowerCase()+">"}return c};(function(b){function d(c){for(;b(".layout-component",c).size()>0;)d(b(".layout-component:eq(0)",c)); var f=b(c).attr("id").split("-")[1];a.components[f]=b.trim(t(b(c).get(0)).replace(/\n/g,"").replace(/\s{1,}/g," "));b(c).remove()}var a={components:{},globalTokens:{}};b.extend(i,{layout:{mAssembleLayout:function(a){var f="";if(a&&a.component&&a.tokens)for(var d=b.isArray(a.tokens)?a.tokens:[a.tokens],g=0,k=d.length;g<k;g++){var j={};b.each(d[g],function(a,b){var e=j,f;f=typeof b=="object"?c.mAssembleLayout(b):b;e[a]=f});f+=c.mReplaceTokens(j,c.mGetComponent(a.component))}return f},mGetComponent:function(c){typeof a.components[c]== "undefined"&&(b("#layout-"+c).size()>0?d(b("#layout-"+c)):a.components[c]=null);return a.components[c]},mGetComponents:function(){return a.components},mLoadComponents:function(){for(;b(".layout-component").size()>0;)d(b(".layout-component:eq(0)"))},mAddGlobalTokens:function(c){b.extend(a.globalTokens,c)},mReplaceTokens:function(c,f){f!=null&&(b.extend(c,a.globalTokens),b.each(c,function(a,b){f=f.replace(RegExp("\\$\\["+a+"\\]","g"),escape(b))}));return unescape(f)}}});var c=i.layout})(jQuery);(function(b){function g(){var a= [];b.each(c.services,function(b){a.push(b)});return a}function a(a){var f={services:[],data:{envID:c.env}};b.extend(!0,f,a.options);if(d.util.mEmpty(f.services))f.services=g();for(var h=b.extend(d.console.mGetMessageTemplate(),{group:"simplr.trigger: "+c.env+" environment",message:[]}),l=0,k=f.services.length;l<k;l++){var j=f.services[l];b.isFunction(c.services[j][a.type])&&c.services[j].data.environmentIDs[c.env]&&h.message.push({message:"["+j+"] "+a.type+" triggered.",data:c.services[j][a.type](f.data)})}h.message.length> 0&&d.console.mMessage(h)}var c={env:"_simplr",services:{}};b.extend(i,{trigger:{mAddServices:function(e){b.each(e,function(e,d){c.services[e]=b.extend({data:{environmentIDs:{}},onLoad:function(){},onPage:function(){},onEvent:function(){},onTransaction:function(){}},d);a({type:"onLoad",options:{services:[e]}})})},mGetServices:function(){return c.services},mSetEnvironment:function(a){c.env=a},mOnPage:function(c){a({type:"onPage",options:b.extend({},c)})},mOnEvent:function(c){a({type:"onEvent",options:b.extend({}, c)})},mOnTransaction:function(c){a({type:"onTransaction",options:b.extend({},c)})}}})})(jQuery);(function(b){function g(f){var d=b("#"+f.id);d.size()==0?b("body").append('<div id="'+f.id+'" style="position: absolute;"></div>'):(d.removeClass(a).removeClass(c),b(f.closeSelector).unbind("click.simplr.layer.destroy."+f.id));var d=b("#"+f.id),g=!(f.xPos!=null&&f.yPos!=null);g?(f.keepCentered&&d.addClass(c),e.mCenter(f.id)):d.css("left",f.xPos+"px").css("top",f.yPos+"px");d.html(f.defaultContent);g&&e.mCenter(f.id); b(f.closeSelector).bind("click.simplr.layer.destroy."+f.id,function(a){a.preventDefault();e.mDestroy({id:f.id,closeSelector:f.closeSelector})})}var a="_simplr_centerLayer",c="_simplr_keepCenterLayer";b.extend(!0,i,{ui:{layer:{mCenter:function(e){if(!d.util.mEmpty(e)){var e=b("#"+e),g=e.width(),l=e.height(),k=d.ui.mWindowInfo(),j=0,j=(k.dimensions[0]-g)/2,j=j<0?20:j;j+=k.offsets[0];var i=0,i=(k.dimensions[1]-l)/2,i=i<0?20:i;i+=k.offsets[1];(g>k.dimensions[0]||l>k.dimensions[1])&&e.hasClass(c)&&e.removeClass(c).addClass(a); e.css("top",i+"px").css("left",j+"px")}},mCreate:function(a){var c=b.extend({ajax:null,callback:null,closeSelector:"#_simplr_layerClose",defaultContent:"",id:"_simplr_layer",isOverlay:!1,keepCentered:!1,xPos:null,yPos:null},a);if(c.isOverlay)c.id=c.id=="_simplr_layer"?"_simplr_overlay":c.id,c.closeSelector=c.closeSelector=="#_simplr_layerClose"?"#_simplr_overlayClose":c.closeSelector,c.xPos=0,c.yPos=0;g(c);if(c.ajax!=null){var e=c.ajax.success;c.ajax.success=function(a,d){c.defaultContent=a;g(c); b.isFunction(e)&&e(a,d)};b.ajax(c.ajax)}else b.isFunction(c.callback)&&c.callback();c.isOverlay&&b("#"+c.id).css({position:"fixed",width:"100%",height:"100%"})},mDestroy:function(a){a=b.extend({id:"_simplr_layer",closeSelector:"#_simplr_layerClose"},a);d.util.mEmpty(a.id)||(b("#"+a.id).remove(),b(a.closeSelector).unbind("click.simplr.ui.layer.destroy."+a.id))}}}});var e=i.ui.layer;b(function(){b(window).bind("resize.simplr.ui.layer",function(){b("."+c+",."+a).each(function(d,g){b(g).addClass(c).removeClass(a); e.mCenter(b(g).attr("id"))})}).bind("scroll.simplr.ui.layer",function(){b("."+c).each(function(a,c){e.mCenter(b(c).attr("id"))})})})})(jQuery);n.extend(!0,i,{ui:{newBrowserWindow:function(b){b=n.extend({url:"",width:500,height:500,name:"_simplr_newBrowserWindow"},b);if(!d.util.mEmpty(b.url)){var g="width="+b.width+",height="+b.height,a=b.url,c=b.name;delete b.url;delete b.width;delete b.height;delete b.name;n.each(b,function(a,b){g+=","+a+"="+b});b=window.open(a,c,g);b!=null&&b.focus()}}}});(function(b){function g(a){this.data= b.extend({animateSpeed:200,containerSelector:"#_simplr_widget_trackableScrollingElement_container",elementSelector:"#_simplr_widget_trackableScrollingElement_element",offset:10,refreshSpeed:500,tolerance:10},a);this.data._PRIVATE={evtString:"scroll.simplr.widget.trackableScrollingElement."+d.ui.widget.mGenerateWidgetID(),timeout:null,previousOffset:0};this.destroy();var c=this;b(window).bind(c.data._PRIVATE.evtString,function(){clearTimeout(c.data._PRIVATE.timeout);c.data._PRIVATE.timeout=setTimeout(function(){var a= b(c.data.containerSelector).eq(0),f=a.children(c.data.elementSelector).eq(0);if(a.is(":visible")&&f.is(":visible")){var a=d.ui.mElementInfo({selector:a}),g=d.ui.mElementInfo({selector:f}),l=d.ui.mWindowInfo(),k=l.offsets[1]-c.data._PRIVATE.previousOffset<0;c.data._PRIVATE.previousOffset=l.offsets[1];var j=null,i=[g.offsets[1]-c.data.tolerance,g.offsets[1]+c.data.tolerance],n=[g.offsets[1]+g.dimensions[1]-c.data.tolerance,g.offsets[1]+g.dimensions[1]+c.data.tolerance];l.dimensions[1]>g.dimensions[1]&& (l.offsets[1]<i[0]||l.offsets[1]>i[1])?j=l.offsets[1]-a.offsets[1]+c.data.offset:k&&l.offsets[1]<i[0]?j=l.offsets[1]-a.offsets[1]+c.data.offset:l.offsets[1]+g.dimensions[1]>n[1]&&(j=l.offsets[1]-a.offsets[1]-(g.dimensions[1]-l.dimensions[1])-c.data.offset);j!=null&&(j<0?j=0:j>a.dimensions[1]-g.dimensions[1]&&(j=a.dimensions[1]-g.dimensions[1]),f.stop().animate({marginTop:j},c.data.animateSpeed))}else f.css("margin-top",0)},c.data.refreshSpeed)})}b.extend(!0,i,{ui:{widget:{oTrackableScrollingElement:function(a){return new g(a)}}}}); g.prototype.reset=function(){b(this.data.elementSelector).eq(0).css("margin-top",0)};g.prototype.destroy=function(){this.reset();b(window).unbind(this.data._PRIVATE.evtString)}})(jQuery);n.extend(!0,i,{util:{mEmpty:function(b){return d.util.mEmpty(b)},mEqual:function(b){return d.util.mEqual(b)},mGetUrlParameter:function(b){return d.util.mGetUrlParameter(b)},mHasLocalStorage:function(){return d.util.mHasLocalStorage()},mTruncateString:function(b){b=n.extend({string:"",size:5,postfix:"",smart:!0},b); if(b.string.length>b.size){var d=b.size-b.postfix.length-1,a=d+1;if(b.smart)for(;b.string.charAt(d)!=" "&&d>0;)d--;return b.string.substring(0,d==0?a:d+1)+b.postfix}return b.string}}});(function(b){b.extend(!0,i,{validation:{mAddCodes:function(b){d.validation.mAddCodes(b)},mGetCodes:function(){return d.validation.mGetCodes()},mAddValidators:function(b){d.validation.mAddValidators(b)},mGetValidators:function(){return d.validation.mGetValidators()},mGetRuleResultsTemplate:function(){return d.validation.mGetRuleResultsTemplate()}, mGetCodeMessage:function(b,a){return d.validation.mGetCodeMessage(b,a)},mValidate:function(b){return d.validation.mValidate(b)}}})})(jQuery);(function(b){function g(a,c){var e=!1;if(typeof a==typeof c)if(b.isArray(a)){if(a.length==c.length)for(var e=!0,d=0,h=a.length;d<h;d++)g(a[d],c[d])||(e=!1,d=h)}else if(b.isPlainObject(a)){if(e=!0,b.each(a,function(a,b){if(!g(b,c[a]))return e=!1}),e){var i=0,k=0;b.each(a,function(){i++});b.each(c,function(){k++});e=i==k}}else e=a==c;return e}d.validation.mAddCodes({eMissingValidator:"Missing Validator", eAlphaNumeric:"$[label] is not alphanumeric.",eAmericanExpress:"$[label] is not a valid AMERICAN EXPRESS number.",eDinersClub:"$[label] is not a valid DINERS CLUB number.",eDiscover:"$[label] is not a valid DISCOVER number.",eEmail:"$[label] is not an email address.",eEqual:"$[label] does not match.",eMastercard:"$[label] is not a valid MASTERCARD number.",eEmpty:"$[label] is empty.",eNumber:"$[label] is not a number.",ePhoneNumber:"$[label] is not a valid Phone Number.",ePostalCode:"$[label] is not a Postal Code.", eVisa:"$[label] is not a valid VISA number."});d.validation.mAddValidators({missingvalidator:function(){return b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:!1,errorCodes:["eMissingValidator"]})},alphanumeric:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^\w*$/.test(a)});a.valid||a.errorCodes.push("eAlphaNumeric");return a},americanexpress:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^3(4|7)\d{2}-?\d{6}-?\d{5}$/.test(a)}); a.valid||a.errorCodes.push("eAmericanExpress");return a},dinersclub:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^3[0,6,8]\d{12}$/.test(a)});a.valid||a.errorCodes.push("eDinersClub");return a},discover:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^6011-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eDiscover");return a},email:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(a)}); a.valid||a.errorCodes.push("eEmail");return a},equal:function(a){var c=b.extend(!0,{},d.validation.mGetRuleResultsTemplate());if(b.isArray(a))for(var e=0,f=a.length;e<f;e++)if(!g(a[0],a[e]))c.valid=!1,e=f;c.valid||c.errorCodes.push("eEqual");return c},mastercard:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^5[1-5]\d{2}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eMastercard");return a},notempty:function(a){var c=b.extend(!0,{},d.validation.mGetRuleResultsTemplate()); if(typeof a!="undefined"&&a!=null)if(typeof a=="string")c.valid=b.trim(a)!="";else if(b.isArray(a))c.valid=a.length!=0;else if(typeof a=="object")c.valid=!b.isEmptyObject(a);c.valid||c.errorCodes.push("eEmpty");return c},number:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:!isNaN(parseFloat(a))&&isFinite(a)});a.valid||a.errorCodes.push("eNumber");return a},phonenumber:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^\d{10}$/.test(a)});a.valid|| a.errorCodes.push("ePhoneNumber");return a},postalcode:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^\d{5}([\-]?\d{4})?$/.test(a)});a.valid||a.errorCodes.push("ePostalCode");return a},visa:function(a){a=b.extend(!0,{},d.validation.mGetRuleResultsTemplate(),{valid:/^4\d{3}-?\d{4}-?\d{4}-?\d{4}$/.test(a)});a.valid||a.errorCodes.push("eVisa");return a}})})(jQuery);(function(b){var d={};b.extend(!0,i,{view:{mAddViews:function(a){b.each(a,function(a,e){var f=b.extend(!0, {},{html:function(){return""},callback:function(){}},e);d[a]=f})},mGetViews:function(){return d},mRender:function(a){a=b.extend({name:"",data:"",selector:""},a);b(a.selector).html(d[a.name].html(a.data));d[a.name].callback(a.selector,a.data)}}})})(jQuery)})(jQuery);